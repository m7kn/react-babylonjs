{"version":3,"file":"3a1a7810-4497fe7bcdd02ae6bb0a.js","mappings":"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","sources":["webpack://@react-babylonjs/docs/../../node_modules/@babylonjs/core/Engines/thinEngine.js"],"sourcesContent":["import _asyncToGenerator from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createClass from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/regenerator/index.js\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { EngineStore } from \"./engineStore.js\";\nimport { Effect } from \"../Materials/effect.js\";\nimport { _WarnImport } from \"../Misc/devTools.js\";\nimport { Observable } from \"../Misc/observable.js\";\nimport { DepthCullingState } from \"../States/depthCullingState.js\";\nimport { StencilState } from \"../States/stencilState.js\";\nimport { AlphaState } from \"../States/alphaCullingState.js\";\nimport { InternalTexture, InternalTextureSource } from \"../Materials/Textures/internalTexture.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { IsDocumentAvailable, IsWindowObjectExist } from \"../Misc/domManagement.js\";\nimport { WebGLShaderProcessor } from \"./WebGL/webGLShaderProcessors.js\";\nimport { WebGL2ShaderProcessor } from \"./WebGL/webGL2ShaderProcessors.js\";\nimport { WebGLDataBuffer } from \"../Meshes/WebGL/webGLDataBuffer.js\";\nimport { WebGLPipelineContext } from \"./WebGL/webGLPipelineContext.js\";\nimport { PerformanceConfigurator } from \"./performanceConfigurator.js\";\nimport { WebGLHardwareTexture } from \"./WebGL/webGLHardwareTexture.js\";\nimport { DrawWrapper } from \"../Materials/drawWrapper.js\";\nimport { StencilStateComposer } from \"../States/stencilStateComposer.js\";\nimport { ShaderLanguage } from \"../Materials/shaderLanguage.js\";\nimport { PrecisionDate } from \"../Misc/precisionDate.js\";\n/**\n * Keeps track of all the buffer info used in engine.\n */\nvar BufferPointer = /*#__PURE__*/_createClass(function BufferPointer() {\n  _classCallCheck(this, BufferPointer);\n});\n/**\n * The base engine class (root of all engines)\n */\nexport var ThinEngine = /*#__PURE__*/function () {\n  /**\n   * Creates a new engine\n   * @param canvasOrContext defines the canvas or WebGL context to use for rendering. If you provide a WebGL context, Babylon.js will not hook events on the canvas (like pointers, keyboards, etc...) so no event observables will be available. This is mostly used when Babylon.js is used as a plugin on a system which already used the WebGL context\n   * @param antialias defines enable antialiasing (default: false)\n   * @param options defines further options to be sent to the getContext() function\n   * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)\n   */\n  function ThinEngine(canvasOrContext, antialias, options, adaptToDeviceRatio) {\n    var _this = this;\n    _classCallCheck(this, ThinEngine);\n    /** @internal */\n    this._name = \"WebGL\";\n    /**\n     * Gets or sets a boolean that indicates if textures must be forced to power of 2 size even if not required\n     */\n    this.forcePOTTextures = false;\n    /**\n     * Gets a boolean indicating if the engine is currently rendering in fullscreen mode\n     */\n    this.isFullscreen = false;\n    /**\n     * Gets or sets a boolean indicating if back faces must be culled. If false, front faces are culled instead (true by default)\n     * If non null, this takes precedence over the value from the material\n     */\n    this.cullBackFaces = null;\n    /**\n     * Gets or sets a boolean indicating if the engine must keep rendering even if the window is not in foreground\n     */\n    this.renderEvenInBackground = true;\n    /**\n     * Gets or sets a boolean indicating that cache can be kept between frames\n     */\n    this.preventCacheWipeBetweenFrames = false;\n    /** Gets or sets a boolean indicating if the engine should validate programs after compilation */\n    this.validateShaderPrograms = false;\n    this._useReverseDepthBuffer = false;\n    /**\n     * Indicates if the z range in NDC space is 0..1 (value: true) or -1..1 (value: false)\n     */\n    this.isNDCHalfZRange = false;\n    /**\n     * Indicates that the origin of the texture/framebuffer space is the bottom left corner. If false, the origin is top left\n     */\n    this.hasOriginBottomLeft = true;\n    /**\n     * Gets or sets a boolean indicating that uniform buffers must be disabled even if they are supported\n     */\n    this.disableUniformBuffers = false;\n    /**\n     * An event triggered when the engine is disposed.\n     */\n    this.onDisposeObservable = new Observable();\n    this._frameId = 0;\n    /** @internal */\n    this._uniformBuffers = new Array();\n    /** @internal */\n    this._storageBuffers = new Array();\n    /** @internal */\n    this._webGLVersion = 1.0;\n    this._windowIsBackground = false;\n    this._highPrecisionShadersAllowed = true;\n    /** @internal */\n    this._badOS = false;\n    /** @internal */\n    this._badDesktopOS = false;\n    this._renderingQueueLaunched = false;\n    this._activeRenderLoops = new Array();\n    // Lost context\n    /**\n     * Observable signaled when a context lost event is raised\n     */\n    this.onContextLostObservable = new Observable();\n    /**\n     * Observable signaled when a context restored event is raised\n     */\n    this.onContextRestoredObservable = new Observable();\n    this._contextWasLost = false;\n    /** @internal */\n    this._doNotHandleContextLost = false;\n    /**\n     * Gets or sets a boolean indicating that vertex array object must be disabled even if they are supported\n     */\n    this.disableVertexArrayObjects = false;\n    // States\n    /** @internal */\n    this._colorWrite = true;\n    /** @internal */\n    this._colorWriteChanged = true;\n    /** @internal */\n    this._depthCullingState = new DepthCullingState();\n    /** @internal */\n    this._stencilStateComposer = new StencilStateComposer();\n    /** @internal */\n    this._stencilState = new StencilState();\n    /** @internal */\n    this._alphaState = new AlphaState();\n    /** @internal */\n    this._alphaMode = 1;\n    /** @internal */\n    this._alphaEquation = 0;\n    // Cache\n    /** @internal */\n    this._internalTexturesCache = new Array();\n    /** @internal */\n    this._renderTargetWrapperCache = new Array();\n    /** @internal */\n    this._activeChannel = 0;\n    this._currentTextureChannel = -1;\n    /** @internal */\n    this._boundTexturesCache = {};\n    this._compiledEffects = {};\n    this._vertexAttribArraysEnabled = [];\n    this._uintIndicesCurrentlySet = false;\n    this._currentBoundBuffer = new Array();\n    /** @internal */\n    this._currentFramebuffer = null;\n    /** @internal */\n    this._dummyFramebuffer = null;\n    this._currentBufferPointers = new Array();\n    this._currentInstanceLocations = new Array();\n    this._currentInstanceBuffers = new Array();\n    this._vaoRecordInProgress = false;\n    this._mustWipeVertexAttributes = false;\n    this._nextFreeTextureSlots = new Array();\n    this._maxSimultaneousTextures = 0;\n    this._maxMSAASamplesOverride = null;\n    this._activeRequests = new Array();\n    /**\n     * If set to true zooming in and out in the browser will rescale the hardware-scaling correctly.\n     */\n    this.adaptToDeviceRatio = false;\n    /** @internal */\n    this._lastDevicePixelRatio = 1.0;\n    /** @internal */\n    this._transformTextureUrl = null;\n    /**\n     * Gets information about the current host\n     */\n    this.hostInformation = {\n      isMobile: false\n    };\n    /**\n     * Defines whether the engine has been created with the premultipliedAlpha option on or not.\n     */\n    this.premultipliedAlpha = true;\n    /**\n     * Observable event triggered before each texture is initialized\n     */\n    this.onBeforeTextureInitObservable = new Observable();\n    /** @internal */\n    this._isWebGPU = false;\n    this._snapshotRenderingMode = 0;\n    this._useExactSrgbConversions = false;\n    this._viewportCached = {\n      x: 0,\n      y: 0,\n      z: 0,\n      w: 0\n    };\n    this._unpackFlipYCached = null;\n    /**\n     * In case you are sharing the context with other applications, it might\n     * be interested to not cache the unpack flip y state to ensure a consistent\n     * value would be set.\n     */\n    this.enableUnpackFlipYCached = true;\n    this._boundUniforms = {};\n    this.startTime = PrecisionDate.Now;\n    var canvas = null;\n    options = options || {};\n    this._creationOptions = options;\n    // Save this off for use in resize().\n    this.adaptToDeviceRatio = adaptToDeviceRatio !== null && adaptToDeviceRatio !== void 0 ? adaptToDeviceRatio : false;\n    this._stencilStateComposer.stencilGlobal = this._stencilState;\n    PerformanceConfigurator.SetMatrixPrecision(!!options.useHighPrecisionMatrix);\n    if (!canvasOrContext) {\n      return;\n    }\n    adaptToDeviceRatio = adaptToDeviceRatio || options.adaptToDeviceRatio || false;\n    if (canvasOrContext.getContext) {\n      canvas = canvasOrContext;\n      this._renderingCanvas = canvas;\n      if (antialias !== undefined) {\n        options.antialias = antialias;\n      }\n      if (options.deterministicLockstep === undefined) {\n        options.deterministicLockstep = false;\n      }\n      if (options.lockstepMaxSteps === undefined) {\n        options.lockstepMaxSteps = 4;\n      }\n      if (options.timeStep === undefined) {\n        options.timeStep = 1 / 60;\n      }\n      if (options.preserveDrawingBuffer === undefined) {\n        options.preserveDrawingBuffer = false;\n      }\n      if (options.audioEngine === undefined) {\n        options.audioEngine = true;\n      }\n      if (options.audioEngineOptions !== undefined && options.audioEngineOptions.audioContext !== undefined) {\n        this._audioContext = options.audioEngineOptions.audioContext;\n      }\n      if (options.audioEngineOptions !== undefined && options.audioEngineOptions.audioDestination !== undefined) {\n        this._audioDestination = options.audioEngineOptions.audioDestination;\n      }\n      if (options.stencil === undefined) {\n        options.stencil = true;\n      }\n      if (options.premultipliedAlpha === false) {\n        this.premultipliedAlpha = false;\n      }\n      if (options.xrCompatible === undefined) {\n        options.xrCompatible = true;\n      }\n      if (options.useExactSrgbConversions !== undefined) {\n        this._useExactSrgbConversions = options.useExactSrgbConversions;\n      }\n      this._doNotHandleContextLost = options.doNotHandleContextLost ? true : false;\n      // Exceptions\n      if (navigator && navigator.userAgent) {\n        // Function to check if running on mobile device\n        this._checkForMobile = function () {\n          var currentUA = navigator.userAgent;\n          _this.hostInformation.isMobile = currentUA.indexOf(\"Mobile\") !== -1 ||\n          // Needed for iOS 13+ detection on iPad (inspired by solution from https://stackoverflow.com/questions/9038625/detect-if-device-is-ios)\n          currentUA.indexOf(\"Mac\") !== -1 && IsDocumentAvailable() && \"ontouchend\" in document;\n        };\n        // Set initial isMobile value\n        this._checkForMobile();\n        // Set up event listener to check when window is resized (used to get emulator activation to work properly)\n        if (IsWindowObjectExist()) {\n          window.addEventListener(\"resize\", this._checkForMobile);\n        }\n        var ua = navigator.userAgent;\n        var _iterator = _createForOfIteratorHelper(ThinEngine.ExceptionList),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var exception = _step.value;\n            var key = exception.key;\n            var targets = exception.targets;\n            var check = new RegExp(key);\n            if (check.test(ua)) {\n              if (exception.capture && exception.captureConstraint) {\n                var capture = exception.capture;\n                var constraint = exception.captureConstraint;\n                var regex = new RegExp(capture);\n                var matches = regex.exec(ua);\n                if (matches && matches.length > 0) {\n                  var capturedValue = parseInt(matches[matches.length - 1]);\n                  if (capturedValue >= constraint) {\n                    continue;\n                  }\n                }\n              }\n              var _iterator2 = _createForOfIteratorHelper(targets),\n                _step2;\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var target = _step2.value;\n                  switch (target) {\n                    case \"uniformBuffer\":\n                      this.disableUniformBuffers = true;\n                      break;\n                    case \"vao\":\n                      this.disableVertexArrayObjects = true;\n                      break;\n                    case \"antialias\":\n                      options.antialias = false;\n                      break;\n                    case \"maxMSAASamples\":\n                      this._maxMSAASamplesOverride = 1;\n                      break;\n                  }\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      // Context lost\n      if (!this._doNotHandleContextLost) {\n        this._onContextLost = function (evt) {\n          evt.preventDefault();\n          _this._contextWasLost = true;\n          Logger.Warn(\"WebGL context lost.\");\n          _this.onContextLostObservable.notifyObservers(_this);\n        };\n        this._onContextRestored = function () {\n          _this._restoreEngineAfterContextLost(_this._initGLContext.bind(_this));\n        };\n        canvas.addEventListener(\"webglcontextlost\", this._onContextLost, false);\n        canvas.addEventListener(\"webglcontextrestored\", this._onContextRestored, false);\n        options.powerPreference = \"high-performance\";\n      }\n      // Detect if we are running on a faulty buggy desktop OS.\n      this._badDesktopOS = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n      if (this._badDesktopOS) {\n        options.xrCompatible = false;\n      }\n      // GL\n      if (!options.disableWebGL2Support) {\n        try {\n          this._gl = canvas.getContext(\"webgl2\", options) || canvas.getContext(\"experimental-webgl2\", options);\n          if (this._gl) {\n            this._webGLVersion = 2.0;\n            this._shaderPlatformName = \"WEBGL2\";\n            // Prevent weird browsers to lie (yeah that happens!)\n            if (!this._gl.deleteQuery) {\n              this._webGLVersion = 1.0;\n              this._shaderPlatformName = \"WEBGL1\";\n            }\n          }\n        } catch (e) {\n          // Do nothing\n        }\n      }\n      if (!this._gl) {\n        if (!canvas) {\n          throw new Error(\"The provided canvas is null or undefined.\");\n        }\n        try {\n          this._gl = canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options);\n        } catch (e) {\n          throw new Error(\"WebGL not supported\");\n        }\n      }\n      if (!this._gl) {\n        throw new Error(\"WebGL not supported\");\n      }\n    } else {\n      this._gl = canvasOrContext;\n      this._renderingCanvas = this._gl.canvas;\n      if (this._gl.renderbufferStorageMultisample) {\n        this._webGLVersion = 2.0;\n        this._shaderPlatformName = \"WEBGL2\";\n      } else {\n        this._shaderPlatformName = \"WEBGL1\";\n      }\n      var attributes = this._gl.getContextAttributes();\n      if (attributes) {\n        options.stencil = attributes.stencil;\n      }\n    }\n    // Ensures a consistent color space unpacking of textures cross browser.\n    this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n    if (options.useHighPrecisionFloats !== undefined) {\n      this._highPrecisionShadersAllowed = options.useHighPrecisionFloats;\n    }\n    // Viewport\n    var devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n    var limitDeviceRatio = options.limitDeviceRatio || devicePixelRatio;\n    this._hardwareScalingLevel = adaptToDeviceRatio ? 1.0 / Math.min(limitDeviceRatio, devicePixelRatio) : 1.0;\n    this._lastDevicePixelRatio = devicePixelRatio;\n    this.resize();\n    this._isStencilEnable = options.stencil ? true : false;\n    this._initGLContext();\n    this._initFeatures();\n    // Prepare buffer pointers\n    for (var i = 0; i < this._caps.maxVertexAttribs; i++) {\n      this._currentBufferPointers[i] = new BufferPointer();\n    }\n    // Shader processor\n    this._shaderProcessor = this.webGLVersion > 1 ? new WebGL2ShaderProcessor() : new WebGLShaderProcessor();\n    // Detect if we are running on a faulty buggy OS.\n    this._badOS = /iPad/i.test(navigator.userAgent) || /iPhone/i.test(navigator.userAgent);\n    // Starting with iOS 14, we can trust the browser\n    // let matches = navigator.userAgent.match(/Version\\/(\\d+)/);\n    // if (matches && matches.length === 2) {\n    //     if (parseInt(matches[1]) >= 14) {\n    //         this._badOS = false;\n    //     }\n    // }\n    var versionToLog = \"Babylon.js v\".concat(ThinEngine.Version);\n    console.log(versionToLog + \" - \".concat(this.description));\n    // Check setAttribute in case of workers\n    if (this._renderingCanvas && this._renderingCanvas.setAttribute) {\n      this._renderingCanvas.setAttribute(\"data-engine\", versionToLog);\n    }\n  }\n  /**\n   * Returns the current npm package of the sdk\n   */\n  // Not mixed with Version for tooling purpose.\n  _createClass(ThinEngine, [{\n    key: \"description\",\n    get:\n    /**\n     * Returns a string describing the current engine\n     */\n    function get() {\n      var description = this.name + this.webGLVersion;\n      if (this._caps.parallelShaderCompile) {\n        description += \" - Parallel shader compilation\";\n      }\n      return description;\n    }\n    /**\n     * Gets or sets the name of the engine\n     */\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this._name;\n    },\n    set: function set(value) {\n      this._name = value;\n    }\n    /**\n     * Returns the version of the engine\n     */\n  }, {\n    key: \"version\",\n    get: function get() {\n      return this._webGLVersion;\n    }\n    /**\n     * Gets or sets the relative url used to load shaders if using the engine in non-minified mode\n     */\n  }, {\n    key: \"_getShaderProcessor\",\n    value:\n    /**\n     * @internal\n     */\n    function _getShaderProcessor(shaderLanguage) {\n      return this._shaderProcessor;\n    }\n    /**\n     * Gets or sets a boolean indicating if depth buffer should be reverse, going from far to near.\n     * This can provide greater z depth for distant objects.\n     */\n  }, {\n    key: \"useReverseDepthBuffer\",\n    get: function get() {\n      return this._useReverseDepthBuffer;\n    },\n    set: function set(useReverse) {\n      if (useReverse === this._useReverseDepthBuffer) {\n        return;\n      }\n      this._useReverseDepthBuffer = useReverse;\n      if (useReverse) {\n        this._depthCullingState.depthFunc = 518;\n      } else {\n        this._depthCullingState.depthFunc = 515;\n      }\n    }\n    /**\n     * Gets the current frame id\n     */\n  }, {\n    key: \"frameId\",\n    get: function get() {\n      return this._frameId;\n    }\n    /**\n     * Gets a boolean indicating that the engine supports uniform buffers\n     * @see https://doc.babylonjs.com/setup/support/webGL2#uniform-buffer-objets\n     */\n  }, {\n    key: \"supportsUniformBuffers\",\n    get: function get() {\n      return this.webGLVersion > 1 && !this.disableUniformBuffers;\n    }\n    /**\n     * Gets the options used for engine creation\n     * @returns EngineOptions object\n     */\n  }, {\n    key: \"getCreationOptions\",\n    value: function getCreationOptions() {\n      return this._creationOptions;\n    }\n    /** @internal */\n  }, {\n    key: \"_shouldUseHighPrecisionShader\",\n    get: function get() {\n      return !!(this._caps.highPrecisionShaderSupported && this._highPrecisionShadersAllowed);\n    }\n    /**\n     * Gets a boolean indicating that only power of 2 textures are supported\n     * Please note that you can still use non power of 2 textures but in this case the engine will forcefully convert them\n     */\n  }, {\n    key: \"needPOTTextures\",\n    get: function get() {\n      return this._webGLVersion < 2 || this.forcePOTTextures;\n    }\n    /**\n     * Gets the list of current active render loop functions\n     * @returns an array with the current render loop functions\n     */\n  }, {\n    key: \"activeRenderLoops\",\n    get: function get() {\n      return this._activeRenderLoops;\n    }\n    /**\n     * Gets or sets a boolean indicating if resources should be retained to be able to handle context lost events\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#handling-webgl-context-lost\n     */\n  }, {\n    key: \"doNotHandleContextLost\",\n    get: function get() {\n      return this._doNotHandleContextLost;\n    },\n    set: function set(value) {\n      this._doNotHandleContextLost = value;\n    }\n  }, {\n    key: \"_supportsHardwareTextureRescaling\",\n    get: function get() {\n      return false;\n    }\n    /**\n     * sets the object from which width and height will be taken from when getting render width and height\n     * Will fallback to the gl object\n     * @param dimensions the framebuffer width and height that will be used.\n     */\n  }, {\n    key: \"framebufferDimensionsObject\",\n    set: function set(dimensions) {\n      this._framebufferDimensionsObject = dimensions;\n    }\n    /**\n     * Gets the current viewport\n     */\n  }, {\n    key: \"currentViewport\",\n    get: function get() {\n      return this._cachedViewport;\n    }\n    /**\n     * Gets the default empty texture\n     */\n  }, {\n    key: \"emptyTexture\",\n    get: function get() {\n      if (!this._emptyTexture) {\n        this._emptyTexture = this.createRawTexture(new Uint8Array(4), 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture;\n    }\n    /**\n     * Gets the default empty 3D texture\n     */\n  }, {\n    key: \"emptyTexture3D\",\n    get: function get() {\n      if (!this._emptyTexture3D) {\n        this._emptyTexture3D = this.createRawTexture3D(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture3D;\n    }\n    /**\n     * Gets the default empty 2D array texture\n     */\n  }, {\n    key: \"emptyTexture2DArray\",\n    get: function get() {\n      if (!this._emptyTexture2DArray) {\n        this._emptyTexture2DArray = this.createRawTexture2DArray(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture2DArray;\n    }\n    /**\n     * Gets the default empty cube texture\n     */\n  }, {\n    key: \"emptyCubeTexture\",\n    get: function get() {\n      if (!this._emptyCubeTexture) {\n        var faceData = new Uint8Array(4);\n        var cubeData = [faceData, faceData, faceData, faceData, faceData, faceData];\n        this._emptyCubeTexture = this.createRawCubeTexture(cubeData, 1, 5, 0, false, false, 1);\n      }\n      return this._emptyCubeTexture;\n    }\n    /**\n     * Gets a boolean indicating if the engine runs in WebGPU or not.\n     */\n  }, {\n    key: \"isWebGPU\",\n    get: function get() {\n      return this._isWebGPU;\n    }\n    /**\n     * Gets the shader platform name used by the effects.\n     */\n  }, {\n    key: \"shaderPlatformName\",\n    get: function get() {\n      return this._shaderPlatformName;\n    }\n    /**\n     * Enables or disables the snapshot rendering mode\n     * Note that the WebGL engine does not support snapshot rendering so setting the value won't have any effect for this engine\n     */\n  }, {\n    key: \"snapshotRendering\",\n    get: function get() {\n      return false;\n    },\n    set: function set(activate) {\n      // WebGL engine does not support snapshot rendering\n    }\n    /**\n     * Gets or sets the snapshot rendering mode\n     */\n  }, {\n    key: \"snapshotRenderingMode\",\n    get: function get() {\n      return this._snapshotRenderingMode;\n    },\n    set: function set(mode) {\n      this._snapshotRenderingMode = mode;\n    }\n    /**\n     * Gets a boolean indicating if the exact sRGB conversions or faster approximations are used for converting to and from linear space.\n     */\n  }, {\n    key: \"useExactSrgbConversions\",\n    get: function get() {\n      return this._useExactSrgbConversions;\n    }\n    /**\n     * Creates a new snapshot at the next frame using the current snapshotRenderingMode\n     */\n  }, {\n    key: \"snapshotRenderingReset\",\n    value: function snapshotRenderingReset() {\n      this.snapshotRendering = false;\n    }\n  }, {\n    key: \"createCanvas\",\n    value:\n    /**\n     * Create a canvas. This method is overridden by other engines\n     * @param width width\n     * @param height height\n     * @returns ICanvas interface\n     */\n    function createCanvas(width, height) {\n      return ThinEngine._CreateCanvas(width, height);\n    }\n    /**\n     * Create an image to use with canvas\n     * @returns IImage interface\n     */\n  }, {\n    key: \"createCanvasImage\",\n    value: function createCanvasImage() {\n      return document.createElement(\"img\");\n    }\n  }, {\n    key: \"_restoreEngineAfterContextLost\",\n    value: function _restoreEngineAfterContextLost(initEngine) {\n      var _this2 = this;\n      // Adding a timeout to avoid race condition at browser level\n      setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _a, depthTest, depthFunc, depthMask, stencilTest;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this2._dummyFramebuffer = null;\n              depthTest = _this2._depthCullingState.depthTest; // backup those values because the call to initEngine / wipeCaches will reset them\n              depthFunc = _this2._depthCullingState.depthFunc;\n              depthMask = _this2._depthCullingState.depthMask;\n              stencilTest = _this2._stencilState.stencilTest; // Rebuild context\n              _context.next = 7;\n              return initEngine();\n            case 7:\n              // Ensure webgl and engine states are matching\n              _this2.wipeCaches(true);\n              // Rebuild effects\n              _this2._rebuildEffects();\n              (_a = _this2._rebuildComputeEffects) === null || _a === void 0 ? void 0 : _a.call(_this2);\n              // Note:\n              //  The call to _rebuildBuffers must be made before the call to _rebuildInternalTextures because in the process of _rebuildBuffers the buffers used by the post process managers will be rebuilt\n              //  and we may need to use the post process manager of the scene during _rebuildInternalTextures (in WebGL1, non-POT textures are rescaled using a post process + post process manager of the scene)\n              // Rebuild buffers\n              _this2._rebuildBuffers();\n              // Rebuild textures\n              _this2._rebuildInternalTextures();\n              // Rebuild textures\n              _this2._rebuildRenderTargetWrappers();\n              // Reset engine states after all the buffer/textures/... have been rebuilt\n              _this2.wipeCaches(true);\n              _this2._depthCullingState.depthTest = depthTest;\n              _this2._depthCullingState.depthFunc = depthFunc;\n              _this2._depthCullingState.depthMask = depthMask;\n              _this2._stencilState.stencilTest = stencilTest;\n              Logger.Warn(_this2.name + \" context successfully restored.\");\n              _this2.onContextRestoredObservable.notifyObservers(_this2);\n              _this2._contextWasLost = false;\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      })), 0);\n    }\n    /**\n     * Shared initialization across engines types.\n     * @param canvas The canvas associated with this instance of the engine.\n     * @param doNotHandleTouchAction Defines that engine should ignore modifying touch action attribute and style\n     * @param audioEngine Defines if an audio engine should be created by default\n     */\n  }, {\n    key: \"_sharedInit\",\n    value: function _sharedInit(canvas, doNotHandleTouchAction, audioEngine) {\n      this._renderingCanvas = canvas;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getShaderProcessingContext\",\n    value: function _getShaderProcessingContext(shaderLanguage) {\n      return null;\n    }\n  }, {\n    key: \"_rebuildInternalTextures\",\n    value: function _rebuildInternalTextures() {\n      var currentState = this._internalTexturesCache.slice(); // Do a copy because the rebuild will add proxies\n      var _iterator3 = _createForOfIteratorHelper(currentState),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var internalTexture = _step3.value;\n          internalTexture._rebuild();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_rebuildRenderTargetWrappers\",\n    value: function _rebuildRenderTargetWrappers() {\n      var currentState = this._renderTargetWrapperCache.slice(); // Do a copy because the rebuild will add proxies\n      var _iterator4 = _createForOfIteratorHelper(currentState),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var renderTargetWrapper = _step4.value;\n          renderTargetWrapper._rebuild();\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"_rebuildEffects\",\n    value: function _rebuildEffects() {\n      for (var key in this._compiledEffects) {\n        var effect = this._compiledEffects[key];\n        effect._pipelineContext = null; // because _prepareEffect will try to dispose this pipeline before recreating it and that would lead to webgl errors\n        effect._wasPreviouslyReady = false;\n        effect._prepareEffect();\n      }\n      Effect.ResetCache();\n    }\n    /**\n     * Gets a boolean indicating if all created effects are ready\n     * @returns true if all effects are ready\n     */\n  }, {\n    key: \"areAllEffectsReady\",\n    value: function areAllEffectsReady() {\n      for (var key in this._compiledEffects) {\n        var effect = this._compiledEffects[key];\n        if (!effect.isReady()) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: \"_rebuildBuffers\",\n    value: function _rebuildBuffers() {\n      // Uniforms\n      var _iterator5 = _createForOfIteratorHelper(this._uniformBuffers),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var uniformBuffer = _step5.value;\n          uniformBuffer._rebuild();\n        }\n        // Storage buffers\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      var _iterator6 = _createForOfIteratorHelper(this._storageBuffers),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var storageBuffer = _step6.value;\n          storageBuffer._rebuild();\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"_initGLContext\",\n    value: function _initGLContext() {\n      var _a;\n      // Caps\n      this._caps = {\n        maxTexturesImageUnits: this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),\n        maxCombinedTexturesImageUnits: this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),\n        maxVertexTextureImageUnits: this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n        maxTextureSize: this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),\n        maxSamples: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_SAMPLES) : 1,\n        maxCubemapTextureSize: this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),\n        maxRenderTextureSize: this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),\n        maxVertexAttribs: this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),\n        maxVaryingVectors: this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),\n        maxFragmentUniformVectors: this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),\n        maxVertexUniformVectors: this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),\n        parallelShaderCompile: this._gl.getExtension(\"KHR_parallel_shader_compile\") || undefined,\n        standardDerivatives: this._webGLVersion > 1 || this._gl.getExtension(\"OES_standard_derivatives\") !== null,\n        maxAnisotropy: 1,\n        astc: this._gl.getExtension(\"WEBGL_compressed_texture_astc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_astc\"),\n        bptc: this._gl.getExtension(\"EXT_texture_compression_bptc\") || this._gl.getExtension(\"WEBKIT_EXT_texture_compression_bptc\"),\n        s3tc: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\"),\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        s3tc_srgb: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc_srgb\"),\n        pvrtc: this._gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n        etc1: this._gl.getExtension(\"WEBGL_compressed_texture_etc1\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc1\"),\n        etc2: this._gl.getExtension(\"WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBGL_compressed_texture_es3_0\"),\n        textureAnisotropicFilterExtension: this._gl.getExtension(\"EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\"),\n        uintIndices: this._webGLVersion > 1 || this._gl.getExtension(\"OES_element_index_uint\") !== null,\n        fragmentDepthSupported: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_frag_depth\") !== null,\n        highPrecisionShaderSupported: false,\n        timerQuery: this._gl.getExtension(\"EXT_disjoint_timer_query_webgl2\") || this._gl.getExtension(\"EXT_disjoint_timer_query\"),\n        supportOcclusionQuery: this._webGLVersion > 1,\n        canUseTimestampForTimerQuery: false,\n        drawBuffersExtension: false,\n        maxMSAASamples: 1,\n        colorBufferFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_float\")),\n        textureFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_float\") ? true : false,\n        textureHalfFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_half_float\") ? true : false,\n        textureHalfFloatRender: false,\n        textureFloatLinearFiltering: false,\n        textureFloatRender: false,\n        textureHalfFloatLinearFiltering: false,\n        vertexArrayObject: false,\n        instancedArrays: false,\n        textureLOD: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_shader_texture_lod\") ? true : false,\n        blendMinMax: false,\n        multiview: this._gl.getExtension(\"OVR_multiview2\"),\n        oculusMultiview: this._gl.getExtension(\"OCULUS_multiview\"),\n        depthTextureExtension: false,\n        canUseGLInstanceID: this._webGLVersion > 1,\n        canUseGLVertexID: this._webGLVersion > 1,\n        supportComputeShaders: false,\n        supportSRGBBuffers: false,\n        supportTransformFeedbacks: this._webGLVersion > 1,\n        textureMaxLevel: this._webGLVersion > 1,\n        texture2DArrayMaxLayerCount: this._webGLVersion > 1 ? 256 : 128\n      };\n      // Infos\n      this._glVersion = this._gl.getParameter(this._gl.VERSION);\n      var rendererInfo = this._gl.getExtension(\"WEBGL_debug_renderer_info\");\n      if (rendererInfo != null) {\n        this._glRenderer = this._gl.getParameter(rendererInfo.UNMASKED_RENDERER_WEBGL);\n        this._glVendor = this._gl.getParameter(rendererInfo.UNMASKED_VENDOR_WEBGL);\n      }\n      if (!this._glVendor) {\n        this._glVendor = this._gl.getParameter(this._gl.VENDOR) || \"Unknown vendor\";\n      }\n      if (!this._glRenderer) {\n        this._glRenderer = this._gl.getParameter(this._gl.RENDERER) || \"Unknown renderer\";\n      }\n      // Constants\n      if (this._gl.HALF_FLOAT_OES !== 0x8d61) {\n        this._gl.HALF_FLOAT_OES = 0x8d61; // Half floating-point type (16-bit).\n      }\n\n      if (this._gl.RGBA16F !== 0x881a) {\n        this._gl.RGBA16F = 0x881a; // RGBA 16-bit floating-point color-renderable internal sized format.\n      }\n\n      if (this._gl.RGBA32F !== 0x8814) {\n        this._gl.RGBA32F = 0x8814; // RGBA 32-bit floating-point color-renderable internal sized format.\n      }\n\n      if (this._gl.DEPTH24_STENCIL8 !== 35056) {\n        this._gl.DEPTH24_STENCIL8 = 35056;\n      }\n      // Extensions\n      if (this._caps.timerQuery) {\n        if (this._webGLVersion === 1) {\n          this._gl.getQuery = this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery);\n        }\n        this._caps.canUseTimestampForTimerQuery = ((_a = this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT, this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)) !== null && _a !== void 0 ? _a : 0) > 0;\n      }\n      this._caps.maxAnisotropy = this._caps.textureAnisotropicFilterExtension ? this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\n      this._caps.textureFloatLinearFiltering = this._caps.textureFloat && this._gl.getExtension(\"OES_texture_float_linear\") ? true : false;\n      this._caps.textureFloatRender = this._caps.textureFloat && this._canRenderToFloatFramebuffer() ? true : false;\n      this._caps.textureHalfFloatLinearFiltering = this._webGLVersion > 1 || this._caps.textureHalfFloat && this._gl.getExtension(\"OES_texture_half_float_linear\") ? true : false;\n      // Compressed formats\n      if (this._caps.astc) {\n        this._gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = this._caps.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n      }\n      if (this._caps.bptc) {\n        this._gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = this._caps.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n      }\n      if (this._caps.s3tc_srgb) {\n        this._gl.COMPRESSED_SRGB_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n        this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n        this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n      }\n      if (this._caps.etc2) {\n        this._gl.COMPRESSED_SRGB8_ETC2 = this._caps.etc2.COMPRESSED_SRGB8_ETC2;\n        this._gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = this._caps.etc2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n      }\n      // Checks if some of the format renders first to allow the use of webgl inspector.\n      if (this._webGLVersion > 1) {\n        if (this._gl.HALF_FLOAT_OES !== 0x140b) {\n          this._gl.HALF_FLOAT_OES = 0x140b;\n        }\n      }\n      this._caps.textureHalfFloatRender = this._caps.textureHalfFloat && this._canRenderToHalfFloatFramebuffer();\n      // Draw buffers\n      if (this._webGLVersion > 1) {\n        this._caps.drawBuffersExtension = true;\n        this._caps.maxMSAASamples = this._maxMSAASamplesOverride !== null ? this._maxMSAASamplesOverride : this._gl.getParameter(this._gl.MAX_SAMPLES);\n      } else {\n        var drawBuffersExtension = this._gl.getExtension(\"WEBGL_draw_buffers\");\n        if (drawBuffersExtension !== null) {\n          this._caps.drawBuffersExtension = true;\n          this._gl.drawBuffers = drawBuffersExtension.drawBuffersWEBGL.bind(drawBuffersExtension);\n          this._gl.DRAW_FRAMEBUFFER = this._gl.FRAMEBUFFER;\n          for (var i = 0; i < 16; i++) {\n            this._gl[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"] = drawBuffersExtension[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n          }\n        }\n      }\n      // Depth Texture\n      if (this._webGLVersion > 1) {\n        this._caps.depthTextureExtension = true;\n      } else {\n        var depthTextureExtension = this._gl.getExtension(\"WEBGL_depth_texture\");\n        if (depthTextureExtension != null) {\n          this._caps.depthTextureExtension = true;\n          this._gl.UNSIGNED_INT_24_8 = depthTextureExtension.UNSIGNED_INT_24_8_WEBGL;\n        }\n      }\n      // Vertex array object\n      if (this.disableVertexArrayObjects) {\n        this._caps.vertexArrayObject = false;\n      } else if (this._webGLVersion > 1) {\n        this._caps.vertexArrayObject = true;\n      } else {\n        var vertexArrayObjectExtension = this._gl.getExtension(\"OES_vertex_array_object\");\n        if (vertexArrayObjectExtension != null) {\n          this._caps.vertexArrayObject = true;\n          this._gl.createVertexArray = vertexArrayObjectExtension.createVertexArrayOES.bind(vertexArrayObjectExtension);\n          this._gl.bindVertexArray = vertexArrayObjectExtension.bindVertexArrayOES.bind(vertexArrayObjectExtension);\n          this._gl.deleteVertexArray = vertexArrayObjectExtension.deleteVertexArrayOES.bind(vertexArrayObjectExtension);\n        }\n      }\n      // Instances count\n      if (this._webGLVersion > 1) {\n        this._caps.instancedArrays = true;\n      } else {\n        var instanceExtension = this._gl.getExtension(\"ANGLE_instanced_arrays\");\n        if (instanceExtension != null) {\n          this._caps.instancedArrays = true;\n          this._gl.drawArraysInstanced = instanceExtension.drawArraysInstancedANGLE.bind(instanceExtension);\n          this._gl.drawElementsInstanced = instanceExtension.drawElementsInstancedANGLE.bind(instanceExtension);\n          this._gl.vertexAttribDivisor = instanceExtension.vertexAttribDivisorANGLE.bind(instanceExtension);\n        } else {\n          this._caps.instancedArrays = false;\n        }\n      }\n      if (this._gl.getShaderPrecisionFormat) {\n        var vertexhighp = this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER, this._gl.HIGH_FLOAT);\n        var fragmenthighp = this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER, this._gl.HIGH_FLOAT);\n        if (vertexhighp && fragmenthighp) {\n          this._caps.highPrecisionShaderSupported = vertexhighp.precision !== 0 && fragmenthighp.precision !== 0;\n        }\n      }\n      if (this._webGLVersion > 1) {\n        this._caps.blendMinMax = true;\n      } else {\n        var blendMinMaxExtension = this._gl.getExtension(\"EXT_blend_minmax\");\n        if (blendMinMaxExtension != null) {\n          this._caps.blendMinMax = true;\n          this._gl.MAX = blendMinMaxExtension.MAX_EXT;\n          this._gl.MIN = blendMinMaxExtension.MIN_EXT;\n        }\n      }\n      // sRGB buffers\n      // only run this if not already set to true (in the constructor, for example)\n      if (!this._caps.supportSRGBBuffers) {\n        if (this._webGLVersion > 1) {\n          this._caps.supportSRGBBuffers = true;\n        } else {\n          var sRGBExtension = this._gl.getExtension(\"EXT_sRGB\");\n          if (sRGBExtension != null) {\n            this._caps.supportSRGBBuffers = true;\n            this._gl.SRGB = sRGBExtension.SRGB_EXT;\n            this._gl.SRGB8 = sRGBExtension.SRGB_ALPHA_EXT;\n            this._gl.SRGB8_ALPHA8 = sRGBExtension.SRGB_ALPHA_EXT;\n          }\n        }\n        // take into account the forced state that was provided in options\n        // When the issue in angle/chrome is fixed the flag should be taken into account only when it is explicitly defined\n        this._caps.supportSRGBBuffers = this._caps.supportSRGBBuffers && !!(this._creationOptions && this._creationOptions.forceSRGBBufferSupportState);\n      }\n      // Depth buffer\n      this._depthCullingState.depthTest = true;\n      this._depthCullingState.depthFunc = this._gl.LEQUAL;\n      this._depthCullingState.depthMask = true;\n      // Texture maps\n      this._maxSimultaneousTextures = this._caps.maxCombinedTexturesImageUnits;\n      for (var slot = 0; slot < this._maxSimultaneousTextures; slot++) {\n        this._nextFreeTextureSlots.push(slot);\n      }\n    }\n  }, {\n    key: \"_initFeatures\",\n    value: function _initFeatures() {\n      this._features = {\n        forceBitmapOverHTMLImageElement: false,\n        supportRenderAndCopyToLodForFloatTextures: this._webGLVersion !== 1,\n        supportDepthStencilTexture: this._webGLVersion !== 1,\n        supportShadowSamplers: this._webGLVersion !== 1,\n        uniformBufferHardCheckMatrix: false,\n        allowTexturePrefiltering: this._webGLVersion !== 1,\n        trackUbosInFrame: false,\n        checkUbosContentBeforeUpload: false,\n        supportCSM: this._webGLVersion !== 1,\n        basisNeedsPOT: this._webGLVersion === 1,\n        support3DTextures: this._webGLVersion !== 1,\n        needTypeSuffixInShaderConstants: this._webGLVersion !== 1,\n        supportMSAA: this._webGLVersion !== 1,\n        supportSSAO2: this._webGLVersion !== 1,\n        supportExtendedTextureFormats: this._webGLVersion !== 1,\n        supportSwitchCaseInShader: this._webGLVersion !== 1,\n        supportSyncTextureRead: true,\n        needsInvertingBitmap: true,\n        useUBOBindingCache: true,\n        needShaderCodeInlining: false,\n        needToAlwaysBindUniformBuffers: false,\n        supportRenderPasses: false,\n        supportSpriteInstancing: true,\n        _collectUbosUpdatedInFrame: false\n      };\n    }\n    /**\n     * Gets version of the current webGL context\n     * Keep it for back compat - use version instead\n     */\n  }, {\n    key: \"webGLVersion\",\n    get: function get() {\n      return this._webGLVersion;\n    }\n    /**\n     * Gets a string identifying the name of the class\n     * @returns \"Engine\" string\n     */\n  }, {\n    key: \"getClassName\",\n    value: function getClassName() {\n      return \"ThinEngine\";\n    }\n    /**\n     * Returns true if the stencil buffer has been enabled through the creation option of the context.\n     */\n  }, {\n    key: \"isStencilEnable\",\n    get: function get() {\n      return this._isStencilEnable;\n    }\n    /** @internal */\n  }, {\n    key: \"_prepareWorkingCanvas\",\n    value: function _prepareWorkingCanvas() {\n      if (this._workingCanvas) {\n        return;\n      }\n      this._workingCanvas = this.createCanvas(1, 1);\n      var context = this._workingCanvas.getContext(\"2d\");\n      if (context) {\n        this._workingContext = context;\n      }\n    }\n    /**\n     * Reset the texture cache to empty state\n     */\n  }, {\n    key: \"resetTextureCache\",\n    value: function resetTextureCache() {\n      for (var key in this._boundTexturesCache) {\n        if (!Object.prototype.hasOwnProperty.call(this._boundTexturesCache, key)) {\n          continue;\n        }\n        this._boundTexturesCache[key] = null;\n      }\n      this._currentTextureChannel = -1;\n    }\n    /**\n     * Gets an object containing information about the current engine context\n     * @returns an object containing the vendor, the renderer and the version of the current engine context\n     */\n  }, {\n    key: \"getInfo\",\n    value: function getInfo() {\n      return this.getGlInfo();\n    }\n    /**\n     * Gets an object containing information about the current webGL context\n     * @returns an object containing the vendor, the renderer and the version of the current webGL context\n     */\n  }, {\n    key: \"getGlInfo\",\n    value: function getGlInfo() {\n      return {\n        vendor: this._glVendor,\n        renderer: this._glRenderer,\n        version: this._glVersion\n      };\n    }\n    /**\n     * Defines the hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @param level defines the level to use\n     */\n  }, {\n    key: \"setHardwareScalingLevel\",\n    value: function setHardwareScalingLevel(level) {\n      this._hardwareScalingLevel = level;\n      this.resize();\n    }\n    /**\n     * Gets the current hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @returns a number indicating the current hardware scaling level\n     */\n  }, {\n    key: \"getHardwareScalingLevel\",\n    value: function getHardwareScalingLevel() {\n      return this._hardwareScalingLevel;\n    }\n    /**\n     * Gets the list of loaded textures\n     * @returns an array containing all loaded textures\n     */\n  }, {\n    key: \"getLoadedTexturesCache\",\n    value: function getLoadedTexturesCache() {\n      return this._internalTexturesCache;\n    }\n    /**\n     * Gets the object containing all engine capabilities\n     * @returns the EngineCapabilities object\n     */\n  }, {\n    key: \"getCaps\",\n    value: function getCaps() {\n      return this._caps;\n    }\n    /**\n     * stop executing a render loop function and remove it from the execution array\n     * @param renderFunction defines the function to be removed. If not provided all functions will be removed.\n     */\n  }, {\n    key: \"stopRenderLoop\",\n    value: function stopRenderLoop(renderFunction) {\n      if (!renderFunction) {\n        this._activeRenderLoops = [];\n        return;\n      }\n      var index = this._activeRenderLoops.indexOf(renderFunction);\n      if (index >= 0) {\n        this._activeRenderLoops.splice(index, 1);\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_renderLoop\",\n    value: function _renderLoop() {\n      if (!this._contextWasLost) {\n        var shouldRender = true;\n        if (!this.renderEvenInBackground && this._windowIsBackground) {\n          shouldRender = false;\n        }\n        if (shouldRender) {\n          // Start new frame\n          this.beginFrame();\n          for (var index = 0; index < this._activeRenderLoops.length; index++) {\n            var renderFunction = this._activeRenderLoops[index];\n            renderFunction();\n          }\n          // Present\n          this.endFrame();\n        }\n      }\n      if (this._activeRenderLoops.length > 0) {\n        this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n      } else {\n        this._renderingQueueLaunched = false;\n      }\n    }\n    /**\n     * Gets the HTML canvas attached with the current webGL context\n     * @returns a HTML canvas\n     */\n  }, {\n    key: \"getRenderingCanvas\",\n    value: function getRenderingCanvas() {\n      return this._renderingCanvas;\n    }\n    /**\n     * Gets the audio context specified in engine initialization options\n     * @returns an Audio Context\n     */\n  }, {\n    key: \"getAudioContext\",\n    value: function getAudioContext() {\n      return this._audioContext;\n    }\n    /**\n     * Gets the audio destination specified in engine initialization options\n     * @returns an audio destination node\n     */\n  }, {\n    key: \"getAudioDestination\",\n    value: function getAudioDestination() {\n      return this._audioDestination;\n    }\n    /**\n     * Gets host window\n     * @returns the host window object\n     */\n  }, {\n    key: \"getHostWindow\",\n    value: function getHostWindow() {\n      if (!IsWindowObjectExist()) {\n        return null;\n      }\n      if (this._renderingCanvas && this._renderingCanvas.ownerDocument && this._renderingCanvas.ownerDocument.defaultView) {\n        return this._renderingCanvas.ownerDocument.defaultView;\n      }\n      return window;\n    }\n    /**\n     * Gets the current render width\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render width\n     */\n  }, {\n    key: \"getRenderWidth\",\n    value: function getRenderWidth() {\n      var useScreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!useScreen && this._currentRenderTarget) {\n        return this._currentRenderTarget.width;\n      }\n      return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferWidth : this._gl.drawingBufferWidth;\n    }\n    /**\n     * Gets the current render height\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render height\n     */\n  }, {\n    key: \"getRenderHeight\",\n    value: function getRenderHeight() {\n      var useScreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!useScreen && this._currentRenderTarget) {\n        return this._currentRenderTarget.height;\n      }\n      return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferHeight : this._gl.drawingBufferHeight;\n    }\n    /**\n     * Can be used to override the current requestAnimationFrame requester.\n     * @internal\n     */\n  }, {\n    key: \"_queueNewFrame\",\n    value: function _queueNewFrame(bindedRenderFunction, requester) {\n      return ThinEngine.QueueNewFrame(bindedRenderFunction, requester);\n    }\n    /**\n     * Register and execute a render loop. The engine can have more than one render function\n     * @param renderFunction defines the function to continuously execute\n     */\n  }, {\n    key: \"runRenderLoop\",\n    value: function runRenderLoop(renderFunction) {\n      if (this._activeRenderLoops.indexOf(renderFunction) !== -1) {\n        return;\n      }\n      this._activeRenderLoops.push(renderFunction);\n      if (!this._renderingQueueLaunched) {\n        this._renderingQueueLaunched = true;\n        this._boundRenderFunction = this._renderLoop.bind(this);\n        this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n      }\n    }\n    /**\n     * Clear the current render buffer or the current render target (if any is set up)\n     * @param color defines the color to use\n     * @param backBuffer defines if the back buffer must be cleared\n     * @param depth defines if the depth buffer must be cleared\n     * @param stencil defines if the stencil buffer must be cleared\n     */\n  }, {\n    key: \"clear\",\n    value: function clear(color, backBuffer, depth) {\n      var stencil = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var useStencilGlobalOnly = this.stencilStateComposer.useStencilGlobalOnly;\n      this.stencilStateComposer.useStencilGlobalOnly = true; // make sure the stencil mask is coming from the global stencil and not from a material (effect) which would currently be in effect\n      this.applyStates();\n      this.stencilStateComposer.useStencilGlobalOnly = useStencilGlobalOnly;\n      var mode = 0;\n      if (backBuffer && color) {\n        this._gl.clearColor(color.r, color.g, color.b, color.a !== undefined ? color.a : 1.0);\n        mode |= this._gl.COLOR_BUFFER_BIT;\n      }\n      if (depth) {\n        if (this.useReverseDepthBuffer) {\n          this._depthCullingState.depthFunc = this._gl.GEQUAL;\n          this._gl.clearDepth(0.0);\n        } else {\n          this._gl.clearDepth(1.0);\n        }\n        mode |= this._gl.DEPTH_BUFFER_BIT;\n      }\n      if (stencil) {\n        this._gl.clearStencil(0);\n        mode |= this._gl.STENCIL_BUFFER_BIT;\n      }\n      this._gl.clear(mode);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_viewport\",\n    value: function _viewport(x, y, width, height) {\n      if (x !== this._viewportCached.x || y !== this._viewportCached.y || width !== this._viewportCached.z || height !== this._viewportCached.w) {\n        this._viewportCached.x = x;\n        this._viewportCached.y = y;\n        this._viewportCached.z = width;\n        this._viewportCached.w = height;\n        this._gl.viewport(x, y, width, height);\n      }\n    }\n    /**\n     * Set the WebGL's viewport\n     * @param viewport defines the viewport element to be used\n     * @param requiredWidth defines the width required for rendering. If not provided the rendering canvas' width is used\n     * @param requiredHeight defines the height required for rendering. If not provided the rendering canvas' height is used\n     */\n  }, {\n    key: \"setViewport\",\n    value: function setViewport(viewport, requiredWidth, requiredHeight) {\n      var width = requiredWidth || this.getRenderWidth();\n      var height = requiredHeight || this.getRenderHeight();\n      var x = viewport.x || 0;\n      var y = viewport.y || 0;\n      this._cachedViewport = viewport;\n      this._viewport(x * width, y * height, width * viewport.width, height * viewport.height);\n    }\n    /**\n     * Begin a new frame\n     */\n  }, {\n    key: \"beginFrame\",\n    value: function beginFrame() {}\n    /**\n     * Enf the current frame\n     */\n  }, {\n    key: \"endFrame\",\n    value: function endFrame() {\n      // Force a flush in case we are using a bad OS.\n      if (this._badOS) {\n        this.flushFramebuffer();\n      }\n      this._frameId++;\n    }\n    /**\n     * Resize the view according to the canvas' size\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     */\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var forceSetSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var width;\n      var height;\n      // Requery hardware scaling level to handle zoomed-in resizing.\n      if (this.adaptToDeviceRatio) {\n        var devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n        var changeRatio = this._lastDevicePixelRatio / devicePixelRatio;\n        this._lastDevicePixelRatio = devicePixelRatio;\n        this._hardwareScalingLevel *= changeRatio;\n      }\n      if (IsWindowObjectExist()) {\n        width = this._renderingCanvas ? this._renderingCanvas.clientWidth || this._renderingCanvas.width : window.innerWidth;\n        height = this._renderingCanvas ? this._renderingCanvas.clientHeight || this._renderingCanvas.height : window.innerHeight;\n      } else {\n        width = this._renderingCanvas ? this._renderingCanvas.width : 100;\n        height = this._renderingCanvas ? this._renderingCanvas.height : 100;\n      }\n      this.setSize(width / this._hardwareScalingLevel, height / this._hardwareScalingLevel, forceSetSize);\n    }\n    /**\n     * Force a specific size of the canvas\n     * @param width defines the new canvas' width\n     * @param height defines the new canvas' height\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     * @returns true if the size was changed\n     */\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      var forceSetSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!this._renderingCanvas) {\n        return false;\n      }\n      width = width | 0;\n      height = height | 0;\n      if (!forceSetSize && this._renderingCanvas.width === width && this._renderingCanvas.height === height) {\n        return false;\n      }\n      this._renderingCanvas.width = width;\n      this._renderingCanvas.height = height;\n      return true;\n    }\n    /**\n     * Binds the frame buffer to the specified texture.\n     * @param texture The render target wrapper to render to\n     * @param faceIndex The face of the texture to render to in case of cube texture\n     * @param requiredWidth The width of the target to render to\n     * @param requiredHeight The height of the target to render to\n     * @param forceFullscreenViewport Forces the viewport to be the entire texture/screen if true\n     * @param lodLevel defines the lod level to bind to the frame buffer\n     * @param layer defines the 2d array index to bind to frame buffer to\n     */\n  }, {\n    key: \"bindFramebuffer\",\n    value: function bindFramebuffer(texture) {\n      var faceIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var requiredWidth = arguments.length > 2 ? arguments[2] : undefined;\n      var requiredHeight = arguments.length > 3 ? arguments[3] : undefined;\n      var forceFullscreenViewport = arguments.length > 4 ? arguments[4] : undefined;\n      var lodLevel = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var layer = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var _a, _b, _c, _d, _e;\n      var webglRTWrapper = texture;\n      if (this._currentRenderTarget) {\n        this.unBindFramebuffer(this._currentRenderTarget);\n      }\n      this._currentRenderTarget = texture;\n      this._bindUnboundFramebuffer(webglRTWrapper._MSAAFramebuffer ? webglRTWrapper._MSAAFramebuffer : webglRTWrapper._framebuffer);\n      var gl = this._gl;\n      if (texture.is2DArray) {\n        gl.framebufferTextureLayer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, (_a = texture.texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource, lodLevel, layer);\n      } else if (texture.isCube) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_b = texture.texture._hardwareTexture) === null || _b === void 0 ? void 0 : _b.underlyingResource, lodLevel);\n      }\n      var depthStencilTexture = texture._depthStencilTexture;\n      if (depthStencilTexture) {\n        var attachment = texture._depthStencilTextureWithStencil ? gl.DEPTH_STENCIL_ATTACHMENT : gl.DEPTH_ATTACHMENT;\n        if (texture.is2DArray) {\n          gl.framebufferTextureLayer(gl.FRAMEBUFFER, attachment, (_c = depthStencilTexture._hardwareTexture) === null || _c === void 0 ? void 0 : _c.underlyingResource, lodLevel, layer);\n        } else if (texture.isCube) {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_d = depthStencilTexture._hardwareTexture) === null || _d === void 0 ? void 0 : _d.underlyingResource, lodLevel);\n        } else {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, (_e = depthStencilTexture._hardwareTexture) === null || _e === void 0 ? void 0 : _e.underlyingResource, lodLevel);\n        }\n      }\n      if (this._cachedViewport && !forceFullscreenViewport) {\n        this.setViewport(this._cachedViewport, requiredWidth, requiredHeight);\n      } else {\n        if (!requiredWidth) {\n          requiredWidth = texture.width;\n          if (lodLevel) {\n            requiredWidth = requiredWidth / Math.pow(2, lodLevel);\n          }\n        }\n        if (!requiredHeight) {\n          requiredHeight = texture.height;\n          if (lodLevel) {\n            requiredHeight = requiredHeight / Math.pow(2, lodLevel);\n          }\n        }\n        this._viewport(0, 0, requiredWidth, requiredHeight);\n      }\n      this.wipeCaches();\n    }\n    /**\n     * Set various states to the webGL context\n     * @param culling defines culling state: true to enable culling, false to disable it\n     * @param zOffset defines the value to apply to zOffset (0 by default)\n     * @param force defines if states must be applied even if cache is up to date\n     * @param reverseSide defines if culling must be reversed (CCW if false, CW if true)\n     * @param cullBackFaces true to cull back faces, false to cull front faces (if culling is enabled)\n     * @param stencil stencil states to set\n     * @param zOffsetUnits defines the value to apply to zOffsetUnits (0 by default)\n     */\n  }, {\n    key: \"setState\",\n    value: function setState(culling) {\n      var zOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var force = arguments.length > 2 ? arguments[2] : undefined;\n      var reverseSide = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var cullBackFaces = arguments.length > 4 ? arguments[4] : undefined;\n      var stencil = arguments.length > 5 ? arguments[5] : undefined;\n      var zOffsetUnits = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var _a, _b;\n      // Culling\n      if (this._depthCullingState.cull !== culling || force) {\n        this._depthCullingState.cull = culling;\n      }\n      // Cull face\n      var cullFace = ((_b = (_a = this.cullBackFaces) !== null && _a !== void 0 ? _a : cullBackFaces) !== null && _b !== void 0 ? _b : true) ? this._gl.BACK : this._gl.FRONT;\n      if (this._depthCullingState.cullFace !== cullFace || force) {\n        this._depthCullingState.cullFace = cullFace;\n      }\n      // Z offset\n      this.setZOffset(zOffset);\n      this.setZOffsetUnits(zOffsetUnits);\n      // Front face\n      var frontFace = reverseSide ? this._gl.CW : this._gl.CCW;\n      if (this._depthCullingState.frontFace !== frontFace || force) {\n        this._depthCullingState.frontFace = frontFace;\n      }\n      this._stencilStateComposer.stencilMaterial = stencil;\n    }\n    /**\n     * Gets a boolean indicating if depth testing is enabled\n     * @returns the current state\n     */\n  }, {\n    key: \"getDepthBuffer\",\n    value: function getDepthBuffer() {\n      return this._depthCullingState.depthTest;\n    }\n    /**\n     * Enable or disable depth buffering\n     * @param enable defines the state to set\n     */\n  }, {\n    key: \"setDepthBuffer\",\n    value: function setDepthBuffer(enable) {\n      this._depthCullingState.depthTest = enable;\n    }\n    /**\n     * Set the z offset Factor to apply to current rendering\n     * @param value defines the offset to apply\n     */\n  }, {\n    key: \"setZOffset\",\n    value: function setZOffset(value) {\n      this._depthCullingState.zOffset = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Factor\n     * @returns the current zOffset Factor state\n     */\n  }, {\n    key: \"getZOffset\",\n    value: function getZOffset() {\n      var zOffset = this._depthCullingState.zOffset;\n      return this.useReverseDepthBuffer ? -zOffset : zOffset;\n    }\n    /**\n     * Set the z offset Units to apply to current rendering\n     * @param value defines the offset to apply\n     */\n  }, {\n    key: \"setZOffsetUnits\",\n    value: function setZOffsetUnits(value) {\n      this._depthCullingState.zOffsetUnits = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Units\n     * @returns the current zOffset Units state\n     */\n  }, {\n    key: \"getZOffsetUnits\",\n    value: function getZOffsetUnits() {\n      var zOffsetUnits = this._depthCullingState.zOffsetUnits;\n      return this.useReverseDepthBuffer ? -zOffsetUnits : zOffsetUnits;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindUnboundFramebuffer\",\n    value: function _bindUnboundFramebuffer(framebuffer) {\n      if (this._currentFramebuffer !== framebuffer) {\n        this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, framebuffer);\n        this._currentFramebuffer = framebuffer;\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_currentFrameBufferIsDefaultFrameBuffer\",\n    value: function _currentFrameBufferIsDefaultFrameBuffer() {\n      return this._currentFramebuffer === null;\n    }\n    /**\n     * Generates the mipmaps for a texture\n     * @param texture texture to generate the mipmaps for\n     */\n  }, {\n    key: \"generateMipmaps\",\n    value: function generateMipmaps(texture) {\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, texture, true);\n      this._gl.generateMipmap(this._gl.TEXTURE_2D);\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n    }\n    /**\n     * Unbind the current render target texture from the webGL context\n     * @param texture defines the render target wrapper to unbind\n     * @param disableGenerateMipMaps defines a boolean indicating that mipmaps must not be generated\n     * @param onBeforeUnbind defines a function which will be called before the effective unbind\n     */\n  }, {\n    key: \"unBindFramebuffer\",\n    value: function unBindFramebuffer(texture) {\n      var disableGenerateMipMaps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var onBeforeUnbind = arguments.length > 2 ? arguments[2] : undefined;\n      var _a;\n      var webglRTWrapper = texture;\n      this._currentRenderTarget = null;\n      // If MSAA, we need to bitblt back to main texture\n      var gl = this._gl;\n      if (webglRTWrapper._MSAAFramebuffer) {\n        if (texture.isMulti) {\n          // This texture is part of a MRT texture, we need to treat all attachments\n          this.unBindMultiColorAttachmentFramebuffer(texture, disableGenerateMipMaps, onBeforeUnbind);\n          return;\n        }\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webglRTWrapper._MSAAFramebuffer);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webglRTWrapper._framebuffer);\n        gl.blitFramebuffer(0, 0, texture.width, texture.height, 0, 0, texture.width, texture.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n      }\n      if (((_a = texture.texture) === null || _a === void 0 ? void 0 : _a.generateMipMaps) && !disableGenerateMipMaps && !texture.isCube) {\n        this.generateMipmaps(texture.texture);\n      }\n      if (onBeforeUnbind) {\n        if (webglRTWrapper._MSAAFramebuffer) {\n          // Bind the correct framebuffer\n          this._bindUnboundFramebuffer(webglRTWrapper._framebuffer);\n        }\n        onBeforeUnbind();\n      }\n      this._bindUnboundFramebuffer(null);\n    }\n    /**\n     * Force a webGL flush (ie. a flush of all waiting webGL commands)\n     */\n  }, {\n    key: \"flushFramebuffer\",\n    value: function flushFramebuffer() {\n      this._gl.flush();\n    }\n    /**\n     * Unbind the current render target and bind the default framebuffer\n     */\n  }, {\n    key: \"restoreDefaultFramebuffer\",\n    value: function restoreDefaultFramebuffer() {\n      if (this._currentRenderTarget) {\n        this.unBindFramebuffer(this._currentRenderTarget);\n      } else {\n        this._bindUnboundFramebuffer(null);\n      }\n      if (this._cachedViewport) {\n        this.setViewport(this._cachedViewport);\n      }\n      this.wipeCaches();\n    }\n    // VBOs\n    /** @internal */\n  }, {\n    key: \"_resetVertexBufferBinding\",\n    value: function _resetVertexBufferBinding() {\n      this.bindArrayBuffer(null);\n      this._cachedVertexBuffers = null;\n    }\n    /**\n     * Creates a vertex buffer\n     * @param data the data for the vertex buffer\n     * @returns the new WebGL static buffer\n     */\n  }, {\n    key: \"createVertexBuffer\",\n    value: function createVertexBuffer(data) {\n      return this._createVertexBuffer(data, this._gl.STATIC_DRAW);\n    }\n  }, {\n    key: \"_createVertexBuffer\",\n    value: function _createVertexBuffer(data, usage) {\n      var vbo = this._gl.createBuffer();\n      if (!vbo) {\n        throw new Error(\"Unable to create vertex buffer\");\n      }\n      var dataBuffer = new WebGLDataBuffer(vbo);\n      this.bindArrayBuffer(dataBuffer);\n      if (data instanceof Array) {\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(data), usage);\n      } else {\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, data, usage);\n      }\n      this._resetVertexBufferBinding();\n      dataBuffer.references = 1;\n      return dataBuffer;\n    }\n    /**\n     * Creates a dynamic vertex buffer\n     * @param data the data for the dynamic vertex buffer\n     * @returns the new WebGL dynamic buffer\n     */\n  }, {\n    key: \"createDynamicVertexBuffer\",\n    value: function createDynamicVertexBuffer(data) {\n      return this._createVertexBuffer(data, this._gl.DYNAMIC_DRAW);\n    }\n  }, {\n    key: \"_resetIndexBufferBinding\",\n    value: function _resetIndexBufferBinding() {\n      this.bindIndexBuffer(null);\n      this._cachedIndexBuffer = null;\n    }\n    /**\n     * Creates a new index buffer\n     * @param indices defines the content of the index buffer\n     * @param updatable defines if the index buffer must be updatable\n     * @returns a new webGL buffer\n     */\n  }, {\n    key: \"createIndexBuffer\",\n    value: function createIndexBuffer(indices, updatable) {\n      var vbo = this._gl.createBuffer();\n      var dataBuffer = new WebGLDataBuffer(vbo);\n      if (!vbo) {\n        throw new Error(\"Unable to create index buffer\");\n      }\n      this.bindIndexBuffer(dataBuffer);\n      var data = this._normalizeIndexData(indices);\n      this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, data, updatable ? this._gl.DYNAMIC_DRAW : this._gl.STATIC_DRAW);\n      this._resetIndexBufferBinding();\n      dataBuffer.references = 1;\n      dataBuffer.is32Bits = data.BYTES_PER_ELEMENT === 4;\n      return dataBuffer;\n    }\n  }, {\n    key: \"_normalizeIndexData\",\n    value: function _normalizeIndexData(indices) {\n      var bytesPerElement = indices.BYTES_PER_ELEMENT;\n      if (bytesPerElement === 2) {\n        return indices;\n      }\n      // Check 32 bit support\n      if (this._caps.uintIndices) {\n        if (indices instanceof Uint32Array) {\n          return indices;\n        } else {\n          // number[] or Int32Array, check if 32 bit is necessary\n          for (var index = 0; index < indices.length; index++) {\n            if (indices[index] >= 65535) {\n              return new Uint32Array(indices);\n            }\n          }\n          return new Uint16Array(indices);\n        }\n      }\n      // No 32 bit support, force conversion to 16 bit (values greater 16 bit are lost)\n      return new Uint16Array(indices);\n    }\n    /**\n     * Bind a webGL buffer to the webGL context\n     * @param buffer defines the buffer to bind\n     */\n  }, {\n    key: \"bindArrayBuffer\",\n    value: function bindArrayBuffer(buffer) {\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this._bindBuffer(buffer, this._gl.ARRAY_BUFFER);\n    }\n    /**\n     * Bind a specific block at a given index in a specific shader program\n     * @param pipelineContext defines the pipeline context to use\n     * @param blockName defines the block name\n     * @param index defines the index where to bind the block\n     */\n  }, {\n    key: \"bindUniformBlock\",\n    value: function bindUniformBlock(pipelineContext, blockName, index) {\n      var program = pipelineContext.program;\n      var uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n      this._gl.uniformBlockBinding(program, uniformLocation, index);\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"bindIndexBuffer\",\n    value: function bindIndexBuffer(buffer) {\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this._bindBuffer(buffer, this._gl.ELEMENT_ARRAY_BUFFER);\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(buffer, target) {\n      if (this._vaoRecordInProgress || this._currentBoundBuffer[target] !== buffer) {\n        this._gl.bindBuffer(target, buffer ? buffer.underlyingResource : null);\n        this._currentBoundBuffer[target] = buffer;\n      }\n    }\n    /**\n     * update the bound buffer with the given data\n     * @param data defines the data to update\n     */\n  }, {\n    key: \"updateArrayBuffer\",\n    value: function updateArrayBuffer(data) {\n      this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n    }\n  }, {\n    key: \"_vertexAttribPointer\",\n    value: function _vertexAttribPointer(buffer, indx, size, type, normalized, stride, offset) {\n      var pointer = this._currentBufferPointers[indx];\n      if (!pointer) {\n        return;\n      }\n      var changed = false;\n      if (!pointer.active) {\n        changed = true;\n        pointer.active = true;\n        pointer.index = indx;\n        pointer.size = size;\n        pointer.type = type;\n        pointer.normalized = normalized;\n        pointer.stride = stride;\n        pointer.offset = offset;\n        pointer.buffer = buffer;\n      } else {\n        if (pointer.buffer !== buffer) {\n          pointer.buffer = buffer;\n          changed = true;\n        }\n        if (pointer.size !== size) {\n          pointer.size = size;\n          changed = true;\n        }\n        if (pointer.type !== type) {\n          pointer.type = type;\n          changed = true;\n        }\n        if (pointer.normalized !== normalized) {\n          pointer.normalized = normalized;\n          changed = true;\n        }\n        if (pointer.stride !== stride) {\n          pointer.stride = stride;\n          changed = true;\n        }\n        if (pointer.offset !== offset) {\n          pointer.offset = offset;\n          changed = true;\n        }\n      }\n      if (changed || this._vaoRecordInProgress) {\n        this.bindArrayBuffer(buffer);\n        if (type === this._gl.UNSIGNED_INT || type === this._gl.INT) {\n          this._gl.vertexAttribIPointer(indx, size, type, stride, offset);\n        } else {\n          this._gl.vertexAttribPointer(indx, size, type, normalized, stride, offset);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindIndexBufferWithCache\",\n    value: function _bindIndexBufferWithCache(indexBuffer) {\n      if (indexBuffer == null) {\n        return;\n      }\n      if (this._cachedIndexBuffer !== indexBuffer) {\n        this._cachedIndexBuffer = indexBuffer;\n        this.bindIndexBuffer(indexBuffer);\n        this._uintIndicesCurrentlySet = indexBuffer.is32Bits;\n      }\n    }\n  }, {\n    key: \"_bindVertexBuffersAttributes\",\n    value: function _bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers) {\n      var attributes = effect.getAttributesNames();\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this.unbindAllAttributes();\n      for (var index = 0; index < attributes.length; index++) {\n        var order = effect.getAttributeLocation(index);\n        if (order >= 0) {\n          var ai = attributes[index];\n          var vertexBuffer = null;\n          if (overrideVertexBuffers) {\n            vertexBuffer = overrideVertexBuffers[ai];\n          }\n          if (!vertexBuffer) {\n            vertexBuffer = vertexBuffers[ai];\n          }\n          if (!vertexBuffer) {\n            continue;\n          }\n          this._gl.enableVertexAttribArray(order);\n          if (!this._vaoRecordInProgress) {\n            this._vertexAttribArraysEnabled[order] = true;\n          }\n          var buffer = vertexBuffer.getBuffer();\n          if (buffer) {\n            this._vertexAttribPointer(buffer, order, vertexBuffer.getSize(), vertexBuffer.type, vertexBuffer.normalized, vertexBuffer.byteStride, vertexBuffer.byteOffset);\n            if (vertexBuffer.getIsInstanced()) {\n              this._gl.vertexAttribDivisor(order, vertexBuffer.getInstanceDivisor());\n              if (!this._vaoRecordInProgress) {\n                this._currentInstanceLocations.push(order);\n                this._currentInstanceBuffers.push(buffer);\n              }\n            }\n          }\n        }\n      }\n    }\n    /**\n     * Records a vertex array object\n     * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n     * @param vertexBuffers defines the list of vertex buffers to store\n     * @param indexBuffer defines the index buffer to store\n     * @param effect defines the effect to store\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     * @returns the new vertex array object\n     */\n  }, {\n    key: \"recordVertexArrayObject\",\n    value: function recordVertexArrayObject(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n      var vao = this._gl.createVertexArray();\n      if (!vao) {\n        throw new Error(\"Unable to create VAO\");\n      }\n      this._vaoRecordInProgress = true;\n      this._gl.bindVertexArray(vao);\n      this._mustWipeVertexAttributes = true;\n      this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n      this.bindIndexBuffer(indexBuffer);\n      this._vaoRecordInProgress = false;\n      this._gl.bindVertexArray(null);\n      return vao;\n    }\n    /**\n     * Bind a specific vertex array object\n     * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n     * @param vertexArrayObject defines the vertex array object to bind\n     * @param indexBuffer defines the index buffer to bind\n     */\n  }, {\n    key: \"bindVertexArrayObject\",\n    value: function bindVertexArrayObject(vertexArrayObject, indexBuffer) {\n      if (this._cachedVertexArrayObject !== vertexArrayObject) {\n        this._cachedVertexArrayObject = vertexArrayObject;\n        this._gl.bindVertexArray(vertexArrayObject);\n        this._cachedVertexBuffers = null;\n        this._cachedIndexBuffer = null;\n        this._uintIndicesCurrentlySet = indexBuffer != null && indexBuffer.is32Bits;\n        this._mustWipeVertexAttributes = true;\n      }\n    }\n    /**\n     * Bind webGl buffers directly to the webGL context\n     * @param vertexBuffer defines the vertex buffer to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param vertexDeclaration defines the vertex declaration to use with the vertex buffer\n     * @param vertexStrideSize defines the vertex stride of the vertex buffer\n     * @param effect defines the effect associated with the vertex buffer\n     */\n  }, {\n    key: \"bindBuffersDirectly\",\n    value: function bindBuffersDirectly(vertexBuffer, indexBuffer, vertexDeclaration, vertexStrideSize, effect) {\n      if (this._cachedVertexBuffers !== vertexBuffer || this._cachedEffectForVertexBuffers !== effect) {\n        this._cachedVertexBuffers = vertexBuffer;\n        this._cachedEffectForVertexBuffers = effect;\n        var attributesCount = effect.getAttributesCount();\n        this._unbindVertexArrayObject();\n        this.unbindAllAttributes();\n        var offset = 0;\n        for (var index = 0; index < attributesCount; index++) {\n          if (index < vertexDeclaration.length) {\n            var order = effect.getAttributeLocation(index);\n            if (order >= 0) {\n              this._gl.enableVertexAttribArray(order);\n              this._vertexAttribArraysEnabled[order] = true;\n              this._vertexAttribPointer(vertexBuffer, order, vertexDeclaration[index], this._gl.FLOAT, false, vertexStrideSize, offset);\n            }\n            offset += vertexDeclaration[index] * 4;\n          }\n        }\n      }\n      this._bindIndexBufferWithCache(indexBuffer);\n    }\n  }, {\n    key: \"_unbindVertexArrayObject\",\n    value: function _unbindVertexArrayObject() {\n      if (!this._cachedVertexArrayObject) {\n        return;\n      }\n      this._cachedVertexArrayObject = null;\n      this._gl.bindVertexArray(null);\n    }\n    /**\n     * Bind a list of vertex buffers to the webGL context\n     * @param vertexBuffers defines the list of vertex buffers to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param effect defines the effect associated with the vertex buffers\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     */\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n      if (this._cachedVertexBuffers !== vertexBuffers || this._cachedEffectForVertexBuffers !== effect) {\n        this._cachedVertexBuffers = vertexBuffers;\n        this._cachedEffectForVertexBuffers = effect;\n        this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n      }\n      this._bindIndexBufferWithCache(indexBuffer);\n    }\n    /**\n     * Unbind all instance attributes\n     */\n  }, {\n    key: \"unbindInstanceAttributes\",\n    value: function unbindInstanceAttributes() {\n      var boundBuffer;\n      for (var i = 0, ul = this._currentInstanceLocations.length; i < ul; i++) {\n        var instancesBuffer = this._currentInstanceBuffers[i];\n        if (boundBuffer != instancesBuffer && instancesBuffer.references) {\n          boundBuffer = instancesBuffer;\n          this.bindArrayBuffer(instancesBuffer);\n        }\n        var offsetLocation = this._currentInstanceLocations[i];\n        this._gl.vertexAttribDivisor(offsetLocation, 0);\n      }\n      this._currentInstanceBuffers.length = 0;\n      this._currentInstanceLocations.length = 0;\n    }\n    /**\n     * Release and free the memory of a vertex array object\n     * @param vao defines the vertex array object to delete\n     */\n  }, {\n    key: \"releaseVertexArrayObject\",\n    value: function releaseVertexArrayObject(vao) {\n      this._gl.deleteVertexArray(vao);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseBuffer\",\n    value: function _releaseBuffer(buffer) {\n      buffer.references--;\n      if (buffer.references === 0) {\n        this._deleteBuffer(buffer);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"_deleteBuffer\",\n    value: function _deleteBuffer(buffer) {\n      this._gl.deleteBuffer(buffer.underlyingResource);\n    }\n    /**\n     * Update the content of a webGL buffer used with instantiation and bind it to the webGL context\n     * @param instancesBuffer defines the webGL buffer to update and bind\n     * @param data defines the data to store in the buffer\n     * @param offsetLocations defines the offsets or attributes information used to determine where data must be stored in the buffer\n     */\n  }, {\n    key: \"updateAndBindInstancesBuffer\",\n    value: function updateAndBindInstancesBuffer(instancesBuffer, data, offsetLocations) {\n      this.bindArrayBuffer(instancesBuffer);\n      if (data) {\n        this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n      }\n      if (offsetLocations[0].index !== undefined) {\n        this.bindInstancesBuffer(instancesBuffer, offsetLocations, true);\n      } else {\n        for (var index = 0; index < 4; index++) {\n          var offsetLocation = offsetLocations[index];\n          if (!this._vertexAttribArraysEnabled[offsetLocation]) {\n            this._gl.enableVertexAttribArray(offsetLocation);\n            this._vertexAttribArraysEnabled[offsetLocation] = true;\n          }\n          this._vertexAttribPointer(instancesBuffer, offsetLocation, 4, this._gl.FLOAT, false, 64, index * 16);\n          this._gl.vertexAttribDivisor(offsetLocation, 1);\n          this._currentInstanceLocations.push(offsetLocation);\n          this._currentInstanceBuffers.push(instancesBuffer);\n        }\n      }\n    }\n    /**\n     * Bind the content of a webGL buffer used with instantiation\n     * @param instancesBuffer defines the webGL buffer to bind\n     * @param attributesInfo defines the offsets or attributes information used to determine where data must be stored in the buffer\n     * @param computeStride defines Whether to compute the strides from the info or use the default 0\n     */\n  }, {\n    key: \"bindInstancesBuffer\",\n    value: function bindInstancesBuffer(instancesBuffer, attributesInfo) {\n      var computeStride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this.bindArrayBuffer(instancesBuffer);\n      var stride = 0;\n      if (computeStride) {\n        for (var i = 0; i < attributesInfo.length; i++) {\n          var ai = attributesInfo[i];\n          stride += ai.attributeSize * 4;\n        }\n      }\n      for (var _i = 0; _i < attributesInfo.length; _i++) {\n        var _ai = attributesInfo[_i];\n        if (_ai.index === undefined) {\n          _ai.index = this._currentEffect.getAttributeLocationByName(_ai.attributeName);\n        }\n        if (_ai.index < 0) {\n          continue;\n        }\n        if (!this._vertexAttribArraysEnabled[_ai.index]) {\n          this._gl.enableVertexAttribArray(_ai.index);\n          this._vertexAttribArraysEnabled[_ai.index] = true;\n        }\n        this._vertexAttribPointer(instancesBuffer, _ai.index, _ai.attributeSize, _ai.attributeType || this._gl.FLOAT, _ai.normalized || false, stride, _ai.offset);\n        this._gl.vertexAttribDivisor(_ai.index, _ai.divisor === undefined ? 1 : _ai.divisor);\n        this._currentInstanceLocations.push(_ai.index);\n        this._currentInstanceBuffers.push(instancesBuffer);\n      }\n    }\n    /**\n     * Disable the instance attribute corresponding to the name in parameter\n     * @param name defines the name of the attribute to disable\n     */\n  }, {\n    key: \"disableInstanceAttributeByName\",\n    value: function disableInstanceAttributeByName(name) {\n      if (!this._currentEffect) {\n        return;\n      }\n      var attributeLocation = this._currentEffect.getAttributeLocationByName(name);\n      this.disableInstanceAttribute(attributeLocation);\n    }\n    /**\n     * Disable the instance attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n  }, {\n    key: \"disableInstanceAttribute\",\n    value: function disableInstanceAttribute(attributeLocation) {\n      var shouldClean = false;\n      var index;\n      while ((index = this._currentInstanceLocations.indexOf(attributeLocation)) !== -1) {\n        this._currentInstanceLocations.splice(index, 1);\n        this._currentInstanceBuffers.splice(index, 1);\n        shouldClean = true;\n        index = this._currentInstanceLocations.indexOf(attributeLocation);\n      }\n      if (shouldClean) {\n        this._gl.vertexAttribDivisor(attributeLocation, 0);\n        this.disableAttributeByIndex(attributeLocation);\n      }\n    }\n    /**\n     * Disable the attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n  }, {\n    key: \"disableAttributeByIndex\",\n    value: function disableAttributeByIndex(attributeLocation) {\n      this._gl.disableVertexAttribArray(attributeLocation);\n      this._vertexAttribArraysEnabled[attributeLocation] = false;\n      this._currentBufferPointers[attributeLocation].active = false;\n    }\n    /**\n     * Send a draw order\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"draw\",\n    value: function draw(useTriangles, indexStart, indexCount, instancesCount) {\n      this.drawElementsType(useTriangles ? 0 : 1, indexStart, indexCount, instancesCount);\n    }\n    /**\n     * Draw a list of points\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawPointClouds\",\n    value: function drawPointClouds(verticesStart, verticesCount, instancesCount) {\n      this.drawArraysType(2, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawUnIndexed\",\n    value: function drawUnIndexed(useTriangles, verticesStart, verticesCount, instancesCount) {\n      this.drawArraysType(useTriangles ? 0 : 1, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of indexed primitives\n     * @param fillMode defines the primitive to use\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawElementsType\",\n    value: function drawElementsType(fillMode, indexStart, indexCount, instancesCount) {\n      // Apply states\n      this.applyStates();\n      this._reportDrawCall();\n      // Render\n      var drawMode = this._drawMode(fillMode);\n      var indexFormat = this._uintIndicesCurrentlySet ? this._gl.UNSIGNED_INT : this._gl.UNSIGNED_SHORT;\n      var mult = this._uintIndicesCurrentlySet ? 4 : 2;\n      if (instancesCount) {\n        this._gl.drawElementsInstanced(drawMode, indexCount, indexFormat, indexStart * mult, instancesCount);\n      } else {\n        this._gl.drawElements(drawMode, indexCount, indexFormat, indexStart * mult);\n      }\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param fillMode defines the primitive to use\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawArraysType\",\n    value: function drawArraysType(fillMode, verticesStart, verticesCount, instancesCount) {\n      // Apply states\n      this.applyStates();\n      this._reportDrawCall();\n      var drawMode = this._drawMode(fillMode);\n      if (instancesCount) {\n        this._gl.drawArraysInstanced(drawMode, verticesStart, verticesCount, instancesCount);\n      } else {\n        this._gl.drawArrays(drawMode, verticesStart, verticesCount);\n      }\n    }\n  }, {\n    key: \"_drawMode\",\n    value: function _drawMode(fillMode) {\n      switch (fillMode) {\n        // Triangle views\n        case 0:\n          return this._gl.TRIANGLES;\n        case 2:\n          return this._gl.POINTS;\n        case 1:\n          return this._gl.LINES;\n        // Draw modes\n        case 3:\n          return this._gl.POINTS;\n        case 4:\n          return this._gl.LINES;\n        case 5:\n          return this._gl.LINE_LOOP;\n        case 6:\n          return this._gl.LINE_STRIP;\n        case 7:\n          return this._gl.TRIANGLE_STRIP;\n        case 8:\n          return this._gl.TRIANGLE_FAN;\n        default:\n          return this._gl.TRIANGLES;\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_reportDrawCall\",\n    value: function _reportDrawCall() {\n      // Will be implemented by children\n    }\n    // Shaders\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseEffect\",\n    value: function _releaseEffect(effect) {\n      if (this._compiledEffects[effect._key]) {\n        delete this._compiledEffects[effect._key];\n      }\n      var pipelineContext = effect.getPipelineContext();\n      if (pipelineContext) {\n        this._deletePipelineContext(pipelineContext);\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_deletePipelineContext\",\n    value: function _deletePipelineContext(pipelineContext) {\n      var webGLPipelineContext = pipelineContext;\n      if (webGLPipelineContext && webGLPipelineContext.program) {\n        webGLPipelineContext.program.__SPECTOR_rebuildProgram = null;\n        this._gl.deleteProgram(webGLPipelineContext.program);\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_getGlobalDefines\",\n    value: function _getGlobalDefines(defines) {\n      if (defines) {\n        if (this.isNDCHalfZRange) {\n          defines[\"IS_NDC_HALF_ZRANGE\"] = \"\";\n        } else {\n          delete defines[\"IS_NDC_HALF_ZRANGE\"];\n        }\n        if (this.useReverseDepthBuffer) {\n          defines[\"USE_REVERSE_DEPTHBUFFER\"] = \"\";\n        } else {\n          delete defines[\"USE_REVERSE_DEPTHBUFFER\"];\n        }\n        if (this.useExactSrgbConversions) {\n          defines[\"USE_EXACT_SRGB_CONVERSIONS\"] = \"\";\n        } else {\n          delete defines[\"USE_EXACT_SRGB_CONVERSIONS\"];\n        }\n        return;\n      } else {\n        var s = \"\";\n        if (this.isNDCHalfZRange) {\n          s += \"#define IS_NDC_HALF_ZRANGE\";\n        }\n        if (this.useReverseDepthBuffer) {\n          if (s) {\n            s += \"\\n\";\n          }\n          s += \"#define USE_REVERSE_DEPTHBUFFER\";\n        }\n        if (this.useExactSrgbConversions) {\n          if (s) {\n            s += \"\\n\";\n          }\n          s += \"#define USE_EXACT_SRGB_CONVERSIONS\";\n        }\n        return s;\n      }\n    }\n    /**\n     * Create a new effect (used to store vertex/fragment shaders)\n     * @param baseName defines the base name of the effect (The name of file without .fragment.fx or .vertex.fx)\n     * @param attributesNamesOrOptions defines either a list of attribute names or an IEffectCreationOptions object\n     * @param uniformsNamesOrEngine defines either a list of uniform names or the engine to use\n     * @param samplers defines an array of string used to represent textures\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param fallbacks defines the list of potential fallbacks to use if shader compilation fails\n     * @param onCompiled defines a function to call when the effect creation is successful\n     * @param onError defines a function to call when the effect creation has failed\n     * @param indexParameters defines an object containing the index values to use to compile shaders (like the maximum number of simultaneous lights)\n     * @param shaderLanguage the language the shader is written in (default: GLSL)\n     * @returns the new Effect\n     */\n  }, {\n    key: \"createEffect\",\n    value: function createEffect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, defines, fallbacks, onCompiled, onError, indexParameters) {\n      var shaderLanguage = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : ShaderLanguage.GLSL;\n      var _a;\n      var vertex = baseName.vertexElement || baseName.vertex || baseName.vertexToken || baseName.vertexSource || baseName;\n      var fragment = baseName.fragmentElement || baseName.fragment || baseName.fragmentToken || baseName.fragmentSource || baseName;\n      var globalDefines = this._getGlobalDefines();\n      var fullDefines = (_a = defines !== null && defines !== void 0 ? defines : attributesNamesOrOptions.defines) !== null && _a !== void 0 ? _a : \"\";\n      if (globalDefines) {\n        fullDefines += globalDefines;\n      }\n      var name = vertex + \"+\" + fragment + \"@\" + fullDefines;\n      if (this._compiledEffects[name]) {\n        var compiledEffect = this._compiledEffects[name];\n        if (onCompiled && compiledEffect.isReady()) {\n          onCompiled(compiledEffect);\n        }\n        return compiledEffect;\n      }\n      var effect = new Effect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, this, defines, fallbacks, onCompiled, onError, indexParameters, name, shaderLanguage);\n      this._compiledEffects[name] = effect;\n      return effect;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"_compileShader\",\n    value: function _compileShader(source, type, defines, shaderVersion) {\n      return this._compileRawShader(ThinEngine._ConcatenateShader(source, defines, shaderVersion), type);\n    }\n  }, {\n    key: \"_compileRawShader\",\n    value: function _compileRawShader(source, type) {\n      var gl = this._gl;\n      var shader = gl.createShader(type === \"vertex\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n      if (!shader) {\n        var error = gl.NO_ERROR;\n        var tempError = gl.NO_ERROR;\n        while ((tempError = gl.getError()) !== gl.NO_ERROR) {\n          error = tempError;\n        }\n        throw new Error(\"Something went wrong while creating a gl \".concat(type, \" shader object. gl error=\").concat(error, \", gl isContextLost=\").concat(gl.isContextLost(), \", _contextWasLost=\").concat(this._contextWasLost));\n      }\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      return shader;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getShaderSource\",\n    value: function _getShaderSource(shader) {\n      return this._gl.getShaderSource(shader);\n    }\n    /**\n     * Directly creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n  }, {\n    key: \"createRawShaderProgram\",\n    value: function createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context) {\n      var transformFeedbackVaryings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      context = context || this._gl;\n      var vertexShader = this._compileRawShader(vertexCode, \"vertex\");\n      var fragmentShader = this._compileRawShader(fragmentCode, \"fragment\");\n      return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * Creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode  defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n  }, {\n    key: \"createShaderProgram\",\n    value: function createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context) {\n      var transformFeedbackVaryings = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      context = context || this._gl;\n      var shaderVersion = this._webGLVersion > 1 ? \"#version 300 es\\n#define WEBGL2 \\n\" : \"\";\n      var vertexShader = this._compileShader(vertexCode, \"vertex\", defines, shaderVersion);\n      var fragmentShader = this._compileShader(fragmentCode, \"fragment\", defines, shaderVersion);\n      return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * Inline functions in shader code that are marked to be inlined\n     * @param code code to inline\n     * @returns inlined code\n     */\n  }, {\n    key: \"inlineShaderCode\",\n    value: function inlineShaderCode(code) {\n      // no inlining needed in the WebGL engine\n      return code;\n    }\n    /**\n     * Creates a new pipeline context\n     * @param shaderProcessingContext defines the shader processing context used during the processing if available\n     * @returns the new pipeline\n     */\n  }, {\n    key: \"createPipelineContext\",\n    value: function createPipelineContext(shaderProcessingContext) {\n      var pipelineContext = new WebGLPipelineContext();\n      pipelineContext.engine = this;\n      if (this._caps.parallelShaderCompile) {\n        pipelineContext.isParallelCompiled = true;\n      }\n      return pipelineContext;\n    }\n    /**\n     * Creates a new material context\n     * @returns the new context\n     */\n  }, {\n    key: \"createMaterialContext\",\n    value: function createMaterialContext() {\n      return undefined;\n    }\n    /**\n     * Creates a new draw context\n     * @returns the new context\n     */\n  }, {\n    key: \"createDrawContext\",\n    value: function createDrawContext() {\n      return undefined;\n    }\n  }, {\n    key: \"_createShaderProgram\",\n    value: function _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context) {\n      var transformFeedbackVaryings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      var shaderProgram = context.createProgram();\n      pipelineContext.program = shaderProgram;\n      if (!shaderProgram) {\n        throw new Error(\"Unable to create program\");\n      }\n      context.attachShader(shaderProgram, vertexShader);\n      context.attachShader(shaderProgram, fragmentShader);\n      context.linkProgram(shaderProgram);\n      pipelineContext.context = context;\n      pipelineContext.vertexShader = vertexShader;\n      pipelineContext.fragmentShader = fragmentShader;\n      if (!pipelineContext.isParallelCompiled) {\n        this._finalizePipelineContext(pipelineContext);\n      }\n      return shaderProgram;\n    }\n  }, {\n    key: \"_finalizePipelineContext\",\n    value: function _finalizePipelineContext(pipelineContext) {\n      var context = pipelineContext.context;\n      var vertexShader = pipelineContext.vertexShader;\n      var fragmentShader = pipelineContext.fragmentShader;\n      var program = pipelineContext.program;\n      var linked = context.getProgramParameter(program, context.LINK_STATUS);\n      if (!linked) {\n        // Get more info\n        // Vertex\n        if (!this._gl.getShaderParameter(vertexShader, this._gl.COMPILE_STATUS)) {\n          var log = this._gl.getShaderInfoLog(vertexShader);\n          if (log) {\n            pipelineContext.vertexCompilationError = log;\n            throw new Error(\"VERTEX SHADER \" + log);\n          }\n        }\n        // Fragment\n        if (!this._gl.getShaderParameter(fragmentShader, this._gl.COMPILE_STATUS)) {\n          var _log = this._gl.getShaderInfoLog(fragmentShader);\n          if (_log) {\n            pipelineContext.fragmentCompilationError = _log;\n            throw new Error(\"FRAGMENT SHADER \" + _log);\n          }\n        }\n        var error = context.getProgramInfoLog(program);\n        if (error) {\n          pipelineContext.programLinkError = error;\n          throw new Error(error);\n        }\n      }\n      if (this.validateShaderPrograms) {\n        context.validateProgram(program);\n        var validated = context.getProgramParameter(program, context.VALIDATE_STATUS);\n        if (!validated) {\n          var _error = context.getProgramInfoLog(program);\n          if (_error) {\n            pipelineContext.programValidationError = _error;\n            throw new Error(_error);\n          }\n        }\n      }\n      context.deleteShader(vertexShader);\n      context.deleteShader(fragmentShader);\n      pipelineContext.vertexShader = undefined;\n      pipelineContext.fragmentShader = undefined;\n      if (pipelineContext.onCompiled) {\n        pipelineContext.onCompiled();\n        pipelineContext.onCompiled = undefined;\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_preparePipelineContext\",\n    value: function _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, rawVertexSourceCode, rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, key) {\n      var webGLRenderingState = pipelineContext;\n      if (createAsRaw) {\n        webGLRenderingState.program = this.createRawShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, undefined, transformFeedbackVaryings);\n      } else {\n        webGLRenderingState.program = this.createShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, defines, undefined, transformFeedbackVaryings);\n      }\n      webGLRenderingState.program.__SPECTOR_rebuildProgram = rebuildRebind;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_isRenderingStateCompiled\",\n    value: function _isRenderingStateCompiled(pipelineContext) {\n      var webGLPipelineContext = pipelineContext;\n      if (this._gl.getProgramParameter(webGLPipelineContext.program, this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)) {\n        this._finalizePipelineContext(webGLPipelineContext);\n        return true;\n      }\n      return false;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_executeWhenRenderingStateIsCompiled\",\n    value: function _executeWhenRenderingStateIsCompiled(pipelineContext, action) {\n      var webGLPipelineContext = pipelineContext;\n      if (!webGLPipelineContext.isParallelCompiled) {\n        action();\n        return;\n      }\n      var oldHandler = webGLPipelineContext.onCompiled;\n      if (oldHandler) {\n        webGLPipelineContext.onCompiled = function () {\n          oldHandler();\n          action();\n        };\n      } else {\n        webGLPipelineContext.onCompiled = action;\n      }\n    }\n    /**\n     * Gets the list of webGL uniform locations associated with a specific program based on a list of uniform names\n     * @param pipelineContext defines the pipeline context to use\n     * @param uniformsNames defines the list of uniform names\n     * @returns an array of webGL uniform locations\n     */\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(pipelineContext, uniformsNames) {\n      var results = new Array();\n      var webGLPipelineContext = pipelineContext;\n      for (var index = 0; index < uniformsNames.length; index++) {\n        results.push(this._gl.getUniformLocation(webGLPipelineContext.program, uniformsNames[index]));\n      }\n      return results;\n    }\n    /**\n     * Gets the list of active attributes for a given webGL program\n     * @param pipelineContext defines the pipeline context to use\n     * @param attributesNames defines the list of attribute names to get\n     * @returns an array of indices indicating the offset of each attribute\n     */\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(pipelineContext, attributesNames) {\n      var results = [];\n      var webGLPipelineContext = pipelineContext;\n      for (var index = 0; index < attributesNames.length; index++) {\n        try {\n          results.push(this._gl.getAttribLocation(webGLPipelineContext.program, attributesNames[index]));\n        } catch (e) {\n          results.push(-1);\n        }\n      }\n      return results;\n    }\n    /**\n     * Activates an effect, making it the current one (ie. the one used for rendering)\n     * @param effect defines the effect to activate\n     */\n  }, {\n    key: \"enableEffect\",\n    value: function enableEffect(effect) {\n      effect = effect !== null && DrawWrapper.IsWrapper(effect) ? effect.effect : effect; // get only the effect, we don't need a Wrapper in the WebGL engine\n      if (!effect || effect === this._currentEffect) {\n        return;\n      }\n      this._stencilStateComposer.stencilMaterial = undefined;\n      effect = effect;\n      // Use program\n      this.bindSamplers(effect);\n      this._currentEffect = effect;\n      if (effect.onBind) {\n        effect.onBind(effect);\n      }\n      if (effect._onBindObservable) {\n        effect._onBindObservable.notifyObservers(effect);\n      }\n    }\n    /**\n     * Set the value of an uniform to a number (int)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the int number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt\",\n    value: function setInt(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1i(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt2\",\n    value: function setInt2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2i(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt3\",\n    value: function setInt3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3i(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt4\",\n    value: function setInt4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4i(uniform, x, y, z, w);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray\",\n    value: function setIntArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray2\",\n    value: function setIntArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray3\",\n    value: function setIntArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray4\",\n    value: function setIntArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray\",\n    value: function setArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      if (array.length < 1) {\n        return false;\n      }\n      this._gl.uniform1fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray2\",\n    value: function setArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray3\",\n    value: function setArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray4\",\n    value: function setArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of float32 (stored as matrices)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrices defines the array of float32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrices\",\n    value: function setMatrices(uniform, matrices) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix4fv(uniform, false, matrices);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (3x3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 3x3 matrix to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrix3x3\",\n    value: function setMatrix3x3(uniform, matrix) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix3fv(uniform, false, matrix);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (2x2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 2x2 matrix to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrix2x2\",\n    value: function setMatrix2x2(uniform, matrix) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix2fv(uniform, false, matrix);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a number (float)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the float number to store\n     * @returns true if the value was transferred\n     */\n  }, {\n    key: \"setFloat\",\n    value: function setFloat(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1f(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat2\",\n    value: function setFloat2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2f(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat3\",\n    value: function setFloat3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3f(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat4\",\n    value: function setFloat4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4f(uniform, x, y, z, w);\n      return true;\n    }\n    // States\n    /**\n     * Apply all cached states (depth, culling, stencil and alpha)\n     */\n  }, {\n    key: \"applyStates\",\n    value: function applyStates() {\n      this._depthCullingState.apply(this._gl);\n      this._stencilStateComposer.apply(this._gl);\n      this._alphaState.apply(this._gl);\n      if (this._colorWriteChanged) {\n        this._colorWriteChanged = false;\n        var enable = this._colorWrite;\n        this._gl.colorMask(enable, enable, enable, enable);\n      }\n    }\n    /**\n     * Enable or disable color writing\n     * @param enable defines the state to set\n     */\n  }, {\n    key: \"setColorWrite\",\n    value: function setColorWrite(enable) {\n      if (enable !== this._colorWrite) {\n        this._colorWriteChanged = true;\n        this._colorWrite = enable;\n      }\n    }\n    /**\n     * Gets a boolean indicating if color writing is enabled\n     * @returns the current color writing state\n     */\n  }, {\n    key: \"getColorWrite\",\n    value: function getColorWrite() {\n      return this._colorWrite;\n    }\n    /**\n     * Gets the depth culling state manager\n     */\n  }, {\n    key: \"depthCullingState\",\n    get: function get() {\n      return this._depthCullingState;\n    }\n    /**\n     * Gets the alpha state manager\n     */\n  }, {\n    key: \"alphaState\",\n    get: function get() {\n      return this._alphaState;\n    }\n    /**\n     * Gets the stencil state manager\n     */\n  }, {\n    key: \"stencilState\",\n    get: function get() {\n      return this._stencilState;\n    }\n    /**\n     * Gets the stencil state composer\n     */\n  }, {\n    key: \"stencilStateComposer\",\n    get: function get() {\n      return this._stencilStateComposer;\n    }\n    // Textures\n    /**\n     * Clears the list of texture accessible through engine.\n     * This can help preventing texture load conflict due to name collision.\n     */\n  }, {\n    key: \"clearInternalTexturesCache\",\n    value: function clearInternalTexturesCache() {\n      this._internalTexturesCache.length = 0;\n    }\n    /**\n     * Force the entire cache to be cleared\n     * You should not have to use this function unless your engine needs to share the webGL context with another engine\n     * @param bruteForce defines a boolean to force clearing ALL caches (including stencil, detoh and alpha states)\n     */\n  }, {\n    key: \"wipeCaches\",\n    value: function wipeCaches(bruteForce) {\n      if (this.preventCacheWipeBetweenFrames && !bruteForce) {\n        return;\n      }\n      this._currentEffect = null;\n      this._viewportCached.x = 0;\n      this._viewportCached.y = 0;\n      this._viewportCached.z = 0;\n      this._viewportCached.w = 0;\n      // Done before in case we clean the attributes\n      this._unbindVertexArrayObject();\n      if (bruteForce) {\n        this._currentProgram = null;\n        this.resetTextureCache();\n        this._stencilStateComposer.reset();\n        this._depthCullingState.reset();\n        this._depthCullingState.depthFunc = this._gl.LEQUAL;\n        this._alphaState.reset();\n        this._alphaMode = 1;\n        this._alphaEquation = 0;\n        this._colorWrite = true;\n        this._colorWriteChanged = true;\n        this._unpackFlipYCached = null;\n        this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n        this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n        this._mustWipeVertexAttributes = true;\n        this.unbindAllAttributes();\n      }\n      this._resetVertexBufferBinding();\n      this._cachedIndexBuffer = null;\n      this._cachedEffectForVertexBuffers = null;\n      this.bindIndexBuffer(null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getSamplingParameters\",\n    value: function _getSamplingParameters(samplingMode, generateMipMaps) {\n      var gl = this._gl;\n      var magFilter = gl.NEAREST;\n      var minFilter = gl.NEAREST;\n      switch (samplingMode) {\n        case 11:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 3:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 8:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 4:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 5:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 6:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 7:\n          magFilter = gl.NEAREST;\n          minFilter = gl.LINEAR;\n          break;\n        case 1:\n          magFilter = gl.NEAREST;\n          minFilter = gl.NEAREST;\n          break;\n        case 9:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 10:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 2:\n          magFilter = gl.LINEAR;\n          minFilter = gl.LINEAR;\n          break;\n        case 12:\n          magFilter = gl.LINEAR;\n          minFilter = gl.NEAREST;\n          break;\n      }\n      return {\n        min: minFilter,\n        mag: magFilter\n      };\n    }\n    /** @internal */\n  }, {\n    key: \"_createTexture\",\n    value: function _createTexture() {\n      var texture = this._gl.createTexture();\n      if (!texture) {\n        throw new Error(\"Unable to create texture\");\n      }\n      return texture;\n    }\n    /** @internal */\n  }, {\n    key: \"_createHardwareTexture\",\n    value: function _createHardwareTexture() {\n      return new WebGLHardwareTexture(this._createTexture(), this._gl);\n    }\n    /**\n     * Creates an internal texture without binding it to a framebuffer\n     * @internal\n     * @param size defines the size of the texture\n     * @param options defines the options used to create the texture\n     * @param delayGPUTextureCreation true to delay the texture creation the first time it is really needed. false to create it right away\n     * @param source source type of the texture\n     * @returns a new internal texture\n     */\n  }, {\n    key: \"_createInternalTexture\",\n    value: function _createInternalTexture(size, options) {\n      var delayGPUTextureCreation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : InternalTextureSource.Unknown;\n      var _a;\n      var generateMipMaps = false;\n      var type = 0;\n      var samplingMode = 3;\n      var format = 5;\n      var useSRGBBuffer = false;\n      var samples = 1;\n      if (options !== undefined && typeof options === \"object\") {\n        generateMipMaps = !!options.generateMipMaps;\n        type = options.type === undefined ? 0 : options.type;\n        samplingMode = options.samplingMode === undefined ? 3 : options.samplingMode;\n        format = options.format === undefined ? 5 : options.format;\n        useSRGBBuffer = options.useSRGBBuffer === undefined ? false : options.useSRGBBuffer;\n        samples = (_a = options.samples) !== null && _a !== void 0 ? _a : 1;\n      } else {\n        generateMipMaps = !!options;\n      }\n      useSRGBBuffer && (useSRGBBuffer = this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU));\n      if (type === 1 && !this._caps.textureFloatLinearFiltering) {\n        // if floating point linear (gl.FLOAT) then force to NEAREST_SAMPLINGMODE\n        samplingMode = 1;\n      } else if (type === 2 && !this._caps.textureHalfFloatLinearFiltering) {\n        // if floating point linear (HALF_FLOAT) then force to NEAREST_SAMPLINGMODE\n        samplingMode = 1;\n      }\n      if (type === 1 && !this._caps.textureFloat) {\n        type = 0;\n        Logger.Warn(\"Float textures are not supported. Type forced to TEXTURETYPE_UNSIGNED_BYTE\");\n      }\n      var gl = this._gl;\n      var texture = new InternalTexture(this, source);\n      var width = size.width || size;\n      var height = size.height || size;\n      var layers = size.layers || 0;\n      var filters = this._getSamplingParameters(samplingMode, generateMipMaps);\n      var target = layers !== 0 ? gl.TEXTURE_2D_ARRAY : gl.TEXTURE_2D;\n      var sizedFormat = this._getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer);\n      var internalFormat = this._getInternalFormat(format);\n      var textureType = this._getWebGLTextureType(type);\n      // Bind\n      this._bindTextureDirectly(target, texture);\n      if (layers !== 0) {\n        texture.is2DArray = true;\n        gl.texImage3D(target, 0, sizedFormat, width, height, layers, 0, internalFormat, textureType, null);\n      } else {\n        gl.texImage2D(target, 0, sizedFormat, width, height, 0, internalFormat, textureType, null);\n      }\n      gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filters.mag);\n      gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filters.min);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      // MipMaps\n      if (generateMipMaps) {\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n      texture._useSRGBBuffer = useSRGBBuffer;\n      texture.baseWidth = width;\n      texture.baseHeight = height;\n      texture.width = width;\n      texture.height = height;\n      texture.depth = layers;\n      texture.isReady = true;\n      texture.samples = samples;\n      texture.generateMipMaps = generateMipMaps;\n      texture.samplingMode = samplingMode;\n      texture.type = type;\n      texture.format = format;\n      this._internalTexturesCache.push(texture);\n      return texture;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getUseSRGBBuffer\",\n    value: function _getUseSRGBBuffer(useSRGBBuffer, noMipmap) {\n      // Generating mipmaps for sRGB textures is not supported in WebGL1 so we must disable the support if mipmaps is enabled\n      return useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU || noMipmap);\n    }\n  }, {\n    key: \"_createTextureBase\",\n    value: function _createTextureBase(url, noMipmap, invertY, scene) {\n      var _this3 = this;\n      var samplingMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 3;\n      var onLoad = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var onError = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var prepareTexture = arguments.length > 7 ? arguments[7] : undefined;\n      var prepareTextureProcessFunction = arguments.length > 8 ? arguments[8] : undefined;\n      var buffer = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var fallback = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var format = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : null;\n      var forcedExtension = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : null;\n      var mimeType = arguments.length > 13 ? arguments[13] : undefined;\n      var loaderOptions = arguments.length > 14 ? arguments[14] : undefined;\n      var useSRGBBuffer = arguments.length > 15 ? arguments[15] : undefined;\n      url = url || \"\";\n      var fromData = url.substr(0, 5) === \"data:\";\n      var fromBlob = url.substr(0, 5) === \"blob:\";\n      var isBase64 = fromData && url.indexOf(\";base64,\") !== -1;\n      var texture = fallback ? fallback : new InternalTexture(this, InternalTextureSource.Url);\n      var originalUrl = url;\n      if (this._transformTextureUrl && !isBase64 && !fallback && !buffer) {\n        url = this._transformTextureUrl(url);\n      }\n      if (originalUrl !== url) {\n        texture._originalUrl = originalUrl;\n      }\n      // establish the file extension, if possible\n      var lastDot = url.lastIndexOf(\".\");\n      var extension = forcedExtension ? forcedExtension : lastDot > -1 ? url.substring(lastDot).toLowerCase() : \"\";\n      var loader = null;\n      // Remove query string\n      var queryStringIndex = extension.indexOf(\"?\");\n      if (queryStringIndex > -1) {\n        extension = extension.split(\"?\")[0];\n      }\n      var _iterator7 = _createForOfIteratorHelper(ThinEngine._TextureLoaders),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var availableLoader = _step7.value;\n          if (availableLoader.canLoad(extension, mimeType)) {\n            loader = availableLoader;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n      if (scene) {\n        scene.addPendingData(texture);\n      }\n      texture.url = url;\n      texture.generateMipMaps = !noMipmap;\n      texture.samplingMode = samplingMode;\n      texture.invertY = invertY;\n      texture._useSRGBBuffer = this._getUseSRGBBuffer(!!useSRGBBuffer, noMipmap);\n      if (!this._doNotHandleContextLost) {\n        // Keep a link to the buffer only if we plan to handle context lost\n        texture._buffer = buffer;\n      }\n      var onLoadObserver = null;\n      if (onLoad && !fallback) {\n        onLoadObserver = texture.onLoadedObservable.add(onLoad);\n      }\n      if (!fallback) {\n        this._internalTexturesCache.push(texture);\n      }\n      var onInternalError = function onInternalError(message, exception) {\n        if (scene) {\n          scene.removePendingData(texture);\n        }\n        if (url === originalUrl) {\n          if (onLoadObserver) {\n            texture.onLoadedObservable.remove(onLoadObserver);\n          }\n          if (EngineStore.UseFallbackTexture) {\n            _this3._createTextureBase(EngineStore.FallbackTexture, noMipmap, texture.invertY, scene, samplingMode, null, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture);\n          }\n          message = (message || \"Unknown error\") + (EngineStore.UseFallbackTexture ? \" - Fallback texture was used\" : \"\");\n          texture.onErrorObservable.notifyObservers({\n            message: message,\n            exception: exception\n          });\n          if (onError) {\n            onError(message, exception);\n          }\n        } else {\n          // fall back to the original url if the transformed url fails to load\n          Logger.Warn(\"Failed to load \".concat(url, \", falling back to \").concat(originalUrl));\n          _this3._createTextureBase(originalUrl, noMipmap, texture.invertY, scene, samplingMode, onLoad, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n        }\n      };\n      // processing for non-image formats\n      if (loader) {\n        var callback = function callback(data) {\n          loader.loadData(data, texture, function (width, height, loadMipmap, isCompressed, done, loadFailed) {\n            if (loadFailed) {\n              onInternalError(\"TextureLoader failed to load data\");\n            } else {\n              prepareTexture(texture, extension, scene, {\n                width: width,\n                height: height\n              }, texture.invertY, !loadMipmap, isCompressed, function () {\n                done();\n                return false;\n              }, samplingMode);\n            }\n          }, loaderOptions);\n        };\n        if (!buffer) {\n          this._loadFile(url, function (data) {\n            return callback(new Uint8Array(data));\n          }, undefined, scene ? scene.offlineProvider : undefined, true, function (request, exception) {\n            onInternalError(\"Unable to load \" + (request ? request.responseURL : url, exception));\n          });\n        } else {\n          if (buffer instanceof ArrayBuffer) {\n            callback(new Uint8Array(buffer));\n          } else if (ArrayBuffer.isView(buffer)) {\n            callback(buffer);\n          } else {\n            if (onError) {\n              onError(\"Unable to load: only ArrayBuffer or ArrayBufferView is supported\", null);\n            }\n          }\n        }\n      } else {\n        var onload = function onload(img) {\n          if (fromBlob && !_this3._doNotHandleContextLost) {\n            // We need to store the image if we need to rebuild the texture\n            // in case of a webgl context lost\n            texture._buffer = img;\n          }\n          prepareTexture(texture, extension, scene, img, texture.invertY, noMipmap, false, prepareTextureProcessFunction, samplingMode);\n        };\n        // According to the WebGL spec section 6.10, ImageBitmaps must be inverted on creation.\n        // So, we pass imageOrientation to _FileToolsLoadImage() as it may create an ImageBitmap.\n        if (!fromData || isBase64) {\n          if (buffer && (typeof buffer.decoding === \"string\" || buffer.close)) {\n            onload(buffer);\n          } else {\n            ThinEngine._FileToolsLoadImage(url, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n              imageOrientation: \"flipY\"\n            } : undefined);\n          }\n        } else if (typeof buffer === \"string\" || buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer) || buffer instanceof Blob) {\n          ThinEngine._FileToolsLoadImage(buffer, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n            imageOrientation: \"flipY\"\n          } : undefined);\n        } else if (buffer) {\n          onload(buffer);\n        }\n      }\n      return texture;\n    }\n    /**\n     * Usually called from Texture.ts.\n     * Passed information to create a WebGLTexture\n     * @param url defines a value which contains one of the following:\n     * * A conventional http URL, e.g. 'http://...' or 'file://...'\n     * * A base64 string of in-line texture data, e.g. 'data:image/jpg;base64,/...'\n     * * An indicator that data being passed using the buffer parameter, e.g. 'data:mytexture.jpg'\n     * @param noMipmap defines a boolean indicating that no mipmaps shall be generated.  Ignored for compressed textures.  They must be in the file\n     * @param invertY when true, image is flipped when loaded.  You probably want true. Certain compressed textures may invert this if their default is inverted (eg. ktx)\n     * @param scene needed for loading to the correct scene\n     * @param samplingMode mode with should be used sample / access the texture (Default: Texture.TRILINEAR_SAMPLINGMODE)\n     * @param onLoad optional callback to be called upon successful completion\n     * @param onError optional callback to be called upon failure\n     * @param buffer a source of a file previously fetched as either a base64 string, an ArrayBuffer (compressed or image format), HTMLImageElement (image format), or a Blob\n     * @param fallback an internal argument in case the function must be called again, due to etc1 not having alpha capabilities\n     * @param format internal format.  Default: RGB when extension is '.jpg' else RGBA.  Ignored for compressed textures\n     * @param forcedExtension defines the extension to use to pick the right loader\n     * @param mimeType defines an optional mime type\n     * @param loaderOptions options to be passed to the loader\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns a InternalTexture for assignment back into BABYLON.Texture\n     */\n  }, {\n    key: \"createTexture\",\n    value: function createTexture(url, noMipmap, invertY, scene) {\n      var _this4 = this;\n      var samplingMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 3;\n      var onLoad = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var onError = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var buffer = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var fallback = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var format = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var forcedExtension = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var mimeType = arguments.length > 11 ? arguments[11] : undefined;\n      var loaderOptions = arguments.length > 12 ? arguments[12] : undefined;\n      var creationFlags = arguments.length > 13 ? arguments[13] : undefined;\n      var useSRGBBuffer = arguments.length > 14 ? arguments[14] : undefined;\n      return this._createTextureBase(url, noMipmap, invertY, scene, samplingMode, onLoad, onError, this._prepareWebGLTexture.bind(this), function (potWidth, potHeight, img, extension, texture, continuationCallback) {\n        var gl = _this4._gl;\n        var isPot = img.width === potWidth && img.height === potHeight;\n        var internalFormat = format ? _this4._getInternalFormat(format, texture._useSRGBBuffer) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : texture._useSRGBBuffer ? gl.SRGB8_ALPHA8 : gl.RGBA;\n        var texelFormat = format ? _this4._getInternalFormat(format) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : gl.RGBA;\n        if (texture._useSRGBBuffer && _this4.webGLVersion === 1) {\n          texelFormat = internalFormat;\n        }\n        if (isPot) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n          return false;\n        }\n        var maxTextureSize = _this4._caps.maxTextureSize;\n        if (img.width > maxTextureSize || img.height > maxTextureSize || !_this4._supportsHardwareTextureRescaling) {\n          _this4._prepareWorkingCanvas();\n          if (!_this4._workingCanvas || !_this4._workingContext) {\n            return false;\n          }\n          _this4._workingCanvas.width = potWidth;\n          _this4._workingCanvas.height = potHeight;\n          _this4._workingContext.drawImage(img, 0, 0, img.width, img.height, 0, 0, potWidth, potHeight);\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, _this4._workingCanvas);\n          texture.width = potWidth;\n          texture.height = potHeight;\n          return false;\n        } else {\n          // Using shaders when possible to rescale because canvas.drawImage is lossy\n          var source = new InternalTexture(_this4, InternalTextureSource.Temp);\n          _this4._bindTextureDirectly(gl.TEXTURE_2D, source, true);\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n          _this4._rescaleTexture(source, texture, scene, internalFormat, function () {\n            _this4._releaseTexture(source);\n            _this4._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n            continuationCallback();\n          });\n        }\n        return true;\n      }, buffer, fallback, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n    }\n    /**\n     * Loads an image as an HTMLImageElement.\n     * @param input url string, ArrayBuffer, or Blob to load\n     * @param onLoad callback called when the image successfully loads\n     * @param onError callback called when the image fails to load\n     * @param offlineProvider offline provider for caching\n     * @param mimeType optional mime type\n     * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\n     * @returns the HTMLImageElement of the loaded image\n     * @internal\n     */\n  }, {\n    key: \"_rescaleTexture\",\n    value:\n    /**\n     * @internal\n     */\n    function _rescaleTexture(source, destination, scene, internalFormat, onComplete) {}\n    /**\n     * Creates a raw texture\n     * @param data defines the data to store in the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param format defines the format of the data\n     * @param generateMipMaps defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\n     * @param compression defines the compression used (null by default)\n     * @param type defines the type fo the data (Engine.TEXTURETYPE_UNSIGNED_INT by default)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns the raw texture inside an InternalTexture\n     */\n  }, {\n    key: \"createRawTexture\",\n    value: function createRawTexture(data, width, height, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var type = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var creationFlags = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      var useSRGBBuffer = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : false;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw cube texture\n     * @param data defines the array of data to use to create each face\n     * @param size defines the size of the textures\n     * @param format defines the format of the data\n     * @param type defines the type of the data (like Engine.TEXTURETYPE_UNSIGNED_INT)\n     * @param generateMipMaps  defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compression used (null by default)\n     * @returns the cube texture as an InternalTexture\n     */\n  }, {\n    key: \"createRawCubeTexture\",\n    value: function createRawCubeTexture(data, size, format, type, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw 3D texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the depth of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @returns a new raw 3D texture (stored in an InternalTexture)\n     */\n  }, {\n    key: \"createRawTexture3D\",\n    value: function createRawTexture3D(data, width, height, depth, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var textureType = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw 2D array texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the number of layers of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @returns a new raw 2D array texture (stored in an InternalTexture)\n     */\n  }, {\n    key: \"createRawTexture2DArray\",\n    value: function createRawTexture2DArray(data, width, height, depth, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var textureType = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_unpackFlipY\",\n    value: function _unpackFlipY(value) {\n      if (this._unpackFlipYCached !== value) {\n        this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, value ? 1 : 0);\n        if (this.enableUnpackFlipYCached) {\n          this._unpackFlipYCached = value;\n        }\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_getUnpackAlignement\",\n    value: function _getUnpackAlignement() {\n      return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT);\n    }\n  }, {\n    key: \"_getTextureTarget\",\n    value: function _getTextureTarget(texture) {\n      if (texture.isCube) {\n        return this._gl.TEXTURE_CUBE_MAP;\n      } else if (texture.is3D) {\n        return this._gl.TEXTURE_3D;\n      } else if (texture.is2DArray || texture.isMultiview) {\n        return this._gl.TEXTURE_2D_ARRAY;\n      }\n      return this._gl.TEXTURE_2D;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param samplingMode defines the required sampling mode\n     * @param texture defines the texture to update\n     * @param generateMipMaps defines whether to generate mipmaps for the texture\n     */\n  }, {\n    key: \"updateTextureSamplingMode\",\n    value: function updateTextureSamplingMode(samplingMode, texture) {\n      var generateMipMaps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var target = this._getTextureTarget(texture);\n      var filters = this._getSamplingParameters(samplingMode, texture.generateMipMaps || generateMipMaps);\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_MAG_FILTER, filters.mag, texture);\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_MIN_FILTER, filters.min);\n      if (generateMipMaps) {\n        texture.generateMipMaps = true;\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n      texture.samplingMode = samplingMode;\n    }\n    /**\n     * Update the dimensions of a texture\n     * @param texture texture to update\n     * @param width new width of the texture\n     * @param height new height of the texture\n     * @param depth new depth of the texture\n     */\n  }, {\n    key: \"updateTextureDimensions\",\n    value: function updateTextureDimensions(texture, width, height) {\n      var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param texture defines the texture to update\n     * @param wrapU defines the texture wrap mode of the u coordinates\n     * @param wrapV defines the texture wrap mode of the v coordinates\n     * @param wrapR defines the texture wrap mode of the r coordinates\n     */\n  }, {\n    key: \"updateTextureWrappingMode\",\n    value: function updateTextureWrappingMode(texture, wrapU) {\n      var wrapV = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var wrapR = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var target = this._getTextureTarget(texture);\n      if (wrapU !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(wrapU), texture);\n        texture._cachedWrapU = wrapU;\n      }\n      if (wrapV !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(wrapV), texture);\n        texture._cachedWrapV = wrapV;\n      }\n      if ((texture.is2DArray || texture.is3D) && wrapR !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(wrapR), texture);\n        texture._cachedWrapR = wrapR;\n      }\n      this._bindTextureDirectly(target, null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setupDepthStencilTexture\",\n    value: function _setupDepthStencilTexture(internalTexture, size, generateStencil, bilinearFiltering, comparisonFunction) {\n      var samples = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var width = size.width || size;\n      var height = size.height || size;\n      var layers = size.layers || 0;\n      internalTexture.baseWidth = width;\n      internalTexture.baseHeight = height;\n      internalTexture.width = width;\n      internalTexture.height = height;\n      internalTexture.is2DArray = layers > 0;\n      internalTexture.depth = layers;\n      internalTexture.isReady = true;\n      internalTexture.samples = samples;\n      internalTexture.generateMipMaps = false;\n      internalTexture.samplingMode = bilinearFiltering ? 2 : 1;\n      internalTexture.type = 0;\n      internalTexture._comparisonFunction = comparisonFunction;\n      var gl = this._gl;\n      var target = this._getTextureTarget(internalTexture);\n      var samplingParameters = this._getSamplingParameters(internalTexture.samplingMode, false);\n      gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, samplingParameters.mag);\n      gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, samplingParameters.min);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      // TEXTURE_COMPARE_FUNC/MODE are only availble in WebGL2.\n      if (this.webGLVersion > 1) {\n        if (comparisonFunction === 0) {\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, 515);\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.NONE);\n        } else {\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, comparisonFunction);\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadCompressedDataToTextureDirectly\",\n    value: function _uploadCompressedDataToTextureDirectly(texture, internalFormat, width, height, data) {\n      var faceIndex = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var lod = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var gl = this._gl;\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      if (texture._useSRGBBuffer) {\n        switch (internalFormat) {\n          case 37492:\n          case 36196:\n            // Note, if using ETC1 and sRGB is requested, this will use ETC2 if available.\n            if (this._caps.etc2) {\n              internalFormat = gl.COMPRESSED_SRGB8_ETC2;\n            } else {\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 37496:\n            if (this._caps.etc2) {\n              internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n            } else {\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 36492:\n            internalFormat = gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n            break;\n          case 37808:\n            internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n            break;\n          case 33776:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 33777:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 33779:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          default:\n            // We don't support a sRGB format corresponding to internalFormat, so revert to non sRGB format\n            texture._useSRGBBuffer = false;\n            break;\n        }\n      }\n      this._gl.compressedTexImage2D(target, lod, internalFormat, width, height, 0, data);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadDataToTextureDirectly\",\n    value: function _uploadDataToTextureDirectly(texture, imageData) {\n      var faceIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var lod = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var babylonInternalFormat = arguments.length > 4 ? arguments[4] : undefined;\n      var useTextureWidthAndHeight = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var gl = this._gl;\n      var textureType = this._getWebGLTextureType(texture.type);\n      var format = this._getInternalFormat(texture.format);\n      var internalFormat = babylonInternalFormat === undefined ? this._getRGBABufferInternalSizedFormat(texture.type, texture.format, texture._useSRGBBuffer) : this._getInternalFormat(babylonInternalFormat, texture._useSRGBBuffer);\n      this._unpackFlipY(texture.invertY);\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      var lodMaxWidth = Math.round(Math.log(texture.width) * Math.LOG2E);\n      var lodMaxHeight = Math.round(Math.log(texture.height) * Math.LOG2E);\n      var width = useTextureWidthAndHeight ? texture.width : Math.pow(2, Math.max(lodMaxWidth - lod, 0));\n      var height = useTextureWidthAndHeight ? texture.height : Math.pow(2, Math.max(lodMaxHeight - lod, 0));\n      gl.texImage2D(target, lod, internalFormat, width, height, 0, format, textureType, imageData);\n    }\n    /**\n     * Update a portion of an internal texture\n     * @param texture defines the texture to update\n     * @param imageData defines the data to store into the texture\n     * @param xOffset defines the x coordinates of the update rectangle\n     * @param yOffset defines the y coordinates of the update rectangle\n     * @param width defines the width of the update rectangle\n     * @param height defines the height of the update rectangle\n     * @param faceIndex defines the face index if texture is a cube (0 by default)\n     * @param lod defines the lod level to update (0 by default)\n     * @param generateMipMaps defines whether to generate mipmaps or not\n     */\n  }, {\n    key: \"updateTextureData\",\n    value: function updateTextureData(texture, imageData, xOffset, yOffset, width, height) {\n      var faceIndex = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var lod = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var generateMipMaps = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;\n      var gl = this._gl;\n      var textureType = this._getWebGLTextureType(texture.type);\n      var format = this._getInternalFormat(texture.format);\n      this._unpackFlipY(texture.invertY);\n      var targetForBinding = gl.TEXTURE_2D;\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n        targetForBinding = gl.TEXTURE_CUBE_MAP;\n      }\n      this._bindTextureDirectly(targetForBinding, texture, true);\n      gl.texSubImage2D(target, lod, xOffset, yOffset, width, height, format, textureType, imageData);\n      if (generateMipMaps) {\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(targetForBinding, null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadArrayBufferViewToTexture\",\n    value: function _uploadArrayBufferViewToTexture(texture, imageData) {\n      var faceIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var lod = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var gl = this._gl;\n      var bindTarget = texture.isCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n      this._bindTextureDirectly(bindTarget, texture, true);\n      this._uploadDataToTextureDirectly(texture, imageData, faceIndex, lod);\n      this._bindTextureDirectly(bindTarget, null, true);\n    }\n  }, {\n    key: \"_prepareWebGLTextureContinuation\",\n    value: function _prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode) {\n      var gl = this._gl;\n      if (!gl) {\n        return;\n      }\n      var filters = this._getSamplingParameters(samplingMode, !noMipmap);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filters.mag);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filters.min);\n      if (!noMipmap && !isCompressed) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n      }\n      this._bindTextureDirectly(gl.TEXTURE_2D, null);\n      // this.resetTextureCache();\n      if (scene) {\n        scene.removePendingData(texture);\n      }\n      texture.onLoadedObservable.notifyObservers(texture);\n      texture.onLoadedObservable.clear();\n    }\n  }, {\n    key: \"_prepareWebGLTexture\",\n    value: function _prepareWebGLTexture(texture, extension, scene, img, invertY, noMipmap, isCompressed, processFunction) {\n      var _this5 = this;\n      var samplingMode = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 3;\n      var maxTextureSize = this.getCaps().maxTextureSize;\n      var potWidth = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.width, maxTextureSize) : img.width);\n      var potHeight = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.height, maxTextureSize) : img.height);\n      var gl = this._gl;\n      if (!gl) {\n        return;\n      }\n      if (!texture._hardwareTexture) {\n        //  this.resetTextureCache();\n        if (scene) {\n          scene.removePendingData(texture);\n        }\n        return;\n      }\n      this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n      this._unpackFlipY(invertY === undefined ? true : invertY ? true : false);\n      texture.baseWidth = img.width;\n      texture.baseHeight = img.height;\n      texture.width = potWidth;\n      texture.height = potHeight;\n      texture.isReady = true;\n      if (processFunction(potWidth, potHeight, img, extension, texture, function () {\n        _this5._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n      })) {\n        // Returning as texture needs extra async steps\n        return;\n      }\n      this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setupFramebufferDepthAttachments\",\n    value: function _setupFramebufferDepthAttachments(generateStencilBuffer, generateDepthBuffer, width, height) {\n      var samples = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n      var gl = this._gl;\n      // Create the depth/stencil buffer\n      if (generateStencilBuffer && generateDepthBuffer) {\n        return this._createRenderBuffer(width, height, samples, gl.DEPTH_STENCIL, gl.DEPTH24_STENCIL8, gl.DEPTH_STENCIL_ATTACHMENT);\n      }\n      if (generateDepthBuffer) {\n        var depthFormat = gl.DEPTH_COMPONENT16;\n        if (this._webGLVersion > 1) {\n          depthFormat = gl.DEPTH_COMPONENT32F;\n        }\n        return this._createRenderBuffer(width, height, samples, depthFormat, depthFormat, gl.DEPTH_ATTACHMENT);\n      }\n      if (generateStencilBuffer) {\n        return this._createRenderBuffer(width, height, samples, gl.STENCIL_INDEX8, gl.STENCIL_INDEX8, gl.STENCIL_ATTACHMENT);\n      }\n      return null;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_createRenderBuffer\",\n    value: function _createRenderBuffer(width, height, samples, internalFormat, msInternalFormat, attachment) {\n      var unbindBuffer = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n      var gl = this._gl;\n      var renderBuffer = gl.createRenderbuffer();\n      return this._updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer);\n    }\n  }, {\n    key: \"_updateRenderBuffer\",\n    value: function _updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment) {\n      var unbindBuffer = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : true;\n      var gl = this._gl;\n      gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n      if (samples > 1 && gl.renderbufferStorageMultisample) {\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, samples, msInternalFormat, width, height);\n      } else {\n        gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\n      }\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, renderBuffer);\n      if (unbindBuffer) {\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n      }\n      return renderBuffer;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseTexture\",\n    value: function _releaseTexture(texture) {\n      var _a;\n      this._deleteTexture((_a = texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource);\n      // Unbind channels\n      this.unbindAllTextures();\n      var index = this._internalTexturesCache.indexOf(texture);\n      if (index !== -1) {\n        this._internalTexturesCache.splice(index, 1);\n      }\n      // Integrated fixed lod samplers.\n      if (texture._lodTextureHigh) {\n        texture._lodTextureHigh.dispose();\n      }\n      if (texture._lodTextureMid) {\n        texture._lodTextureMid.dispose();\n      }\n      if (texture._lodTextureLow) {\n        texture._lodTextureLow.dispose();\n      }\n      // Integrated irradiance map.\n      if (texture._irradianceTexture) {\n        texture._irradianceTexture.dispose();\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseRenderTargetWrapper\",\n    value: function _releaseRenderTargetWrapper(rtWrapper) {\n      var index = this._renderTargetWrapperCache.indexOf(rtWrapper);\n      if (index !== -1) {\n        this._renderTargetWrapperCache.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"_deleteTexture\",\n    value: function _deleteTexture(texture) {\n      if (texture) {\n        this._gl.deleteTexture(texture);\n      }\n    }\n  }, {\n    key: \"_setProgram\",\n    value: function _setProgram(program) {\n      if (this._currentProgram !== program) {\n        this._gl.useProgram(program);\n        this._currentProgram = program;\n      }\n    }\n    /**\n     * Binds an effect to the webGL context\n     * @param effect defines the effect to bind\n     */\n  }, {\n    key: \"bindSamplers\",\n    value: function bindSamplers(effect) {\n      var webGLPipelineContext = effect.getPipelineContext();\n      this._setProgram(webGLPipelineContext.program);\n      var samplers = effect.getSamplers();\n      for (var index = 0; index < samplers.length; index++) {\n        var uniform = effect.getUniform(samplers[index]);\n        if (uniform) {\n          this._boundUniforms[index] = uniform;\n        }\n      }\n      this._currentEffect = null;\n    }\n  }, {\n    key: \"_activateCurrentTexture\",\n    value: function _activateCurrentTexture() {\n      if (this._currentTextureChannel !== this._activeChannel) {\n        this._gl.activeTexture(this._gl.TEXTURE0 + this._activeChannel);\n        this._currentTextureChannel = this._activeChannel;\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindTextureDirectly\",\n    value: function _bindTextureDirectly(target, texture) {\n      var forTextureDataUpdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var force = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var _a, _b;\n      var wasPreviouslyBound = false;\n      var isTextureForRendering = texture && texture._associatedChannel > -1;\n      if (forTextureDataUpdate && isTextureForRendering) {\n        this._activeChannel = texture._associatedChannel;\n      }\n      var currentTextureBound = this._boundTexturesCache[this._activeChannel];\n      if (currentTextureBound !== texture || force) {\n        this._activateCurrentTexture();\n        if (texture && texture.isMultiview) {\n          //this._gl.bindTexture(target, texture ? texture._colorTextureArray : null);\n          console.error(target, texture);\n          throw \"_bindTextureDirectly called with a multiview texture!\";\n        } else {\n          this._gl.bindTexture(target, (_b = (_a = texture === null || texture === void 0 ? void 0 : texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource) !== null && _b !== void 0 ? _b : null);\n        }\n        this._boundTexturesCache[this._activeChannel] = texture;\n        if (texture) {\n          texture._associatedChannel = this._activeChannel;\n        }\n      } else if (forTextureDataUpdate) {\n        wasPreviouslyBound = true;\n        this._activateCurrentTexture();\n      }\n      if (isTextureForRendering && !forTextureDataUpdate) {\n        this._bindSamplerUniformToChannel(texture._associatedChannel, this._activeChannel);\n      }\n      return wasPreviouslyBound;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindTexture\",\n    value: function _bindTexture(channel, texture, name) {\n      if (channel === undefined) {\n        return;\n      }\n      if (texture) {\n        texture._associatedChannel = channel;\n      }\n      this._activeChannel = channel;\n      var target = texture ? this._getTextureTarget(texture) : this._gl.TEXTURE_2D;\n      this._bindTextureDirectly(target, texture);\n    }\n    /**\n     * Unbind all textures from the webGL context\n     */\n  }, {\n    key: \"unbindAllTextures\",\n    value: function unbindAllTextures() {\n      for (var channel = 0; channel < this._maxSimultaneousTextures; channel++) {\n        this._activeChannel = channel;\n        this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n        this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n        if (this.webGLVersion > 1) {\n          this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n          this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n        }\n      }\n    }\n    /**\n     * Sets a texture to the according uniform.\n     * @param channel The texture channel\n     * @param uniform The uniform to set\n     * @param texture The texture to apply\n     * @param name The name of the uniform in the effect\n     */\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(channel, uniform, texture, name) {\n      if (channel === undefined) {\n        return;\n      }\n      if (uniform) {\n        this._boundUniforms[channel] = uniform;\n      }\n      this._setTexture(channel, texture);\n    }\n  }, {\n    key: \"_bindSamplerUniformToChannel\",\n    value: function _bindSamplerUniformToChannel(sourceSlot, destination) {\n      var uniform = this._boundUniforms[sourceSlot];\n      if (!uniform || uniform._currentState === destination) {\n        return;\n      }\n      this._gl.uniform1i(uniform, destination);\n      uniform._currentState = destination;\n    }\n  }, {\n    key: \"_getTextureWrapMode\",\n    value: function _getTextureWrapMode(mode) {\n      switch (mode) {\n        case 1:\n          return this._gl.REPEAT;\n        case 0:\n          return this._gl.CLAMP_TO_EDGE;\n        case 2:\n          return this._gl.MIRRORED_REPEAT;\n      }\n      return this._gl.REPEAT;\n    }\n  }, {\n    key: \"_setTexture\",\n    value: function _setTexture(channel, texture) {\n      var isPartOfTextureArray = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var depthStencilTexture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var name = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"\";\n      // Not ready?\n      if (!texture) {\n        if (this._boundTexturesCache[channel] != null) {\n          this._activeChannel = channel;\n          this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n          this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n          if (this.webGLVersion > 1) {\n            this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n            this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n          }\n        }\n        return false;\n      }\n      // Video\n      if (texture.video) {\n        this._activeChannel = channel;\n        texture.update();\n      } else if (texture.delayLoadState === 4) {\n        // Delay loading\n        texture.delayLoad();\n        return false;\n      }\n      var internalTexture;\n      if (depthStencilTexture) {\n        internalTexture = texture.depthStencilTexture;\n      } else if (texture.isReady()) {\n        internalTexture = texture.getInternalTexture();\n      } else if (texture.isCube) {\n        internalTexture = this.emptyCubeTexture;\n      } else if (texture.is3D) {\n        internalTexture = this.emptyTexture3D;\n      } else if (texture.is2DArray) {\n        internalTexture = this.emptyTexture2DArray;\n      } else {\n        internalTexture = this.emptyTexture;\n      }\n      if (!isPartOfTextureArray && internalTexture) {\n        internalTexture._associatedChannel = channel;\n      }\n      var needToBind = true;\n      if (this._boundTexturesCache[channel] === internalTexture) {\n        if (!isPartOfTextureArray) {\n          this._bindSamplerUniformToChannel(internalTexture._associatedChannel, channel);\n        }\n        needToBind = false;\n      }\n      this._activeChannel = channel;\n      var target = this._getTextureTarget(internalTexture);\n      if (needToBind) {\n        this._bindTextureDirectly(target, internalTexture, isPartOfTextureArray);\n      }\n      if (internalTexture && !internalTexture.isMultiview) {\n        // CUBIC_MODE and SKYBOX_MODE both require CLAMP_TO_EDGE.  All other modes use REPEAT.\n        if (internalTexture.isCube && internalTexture._cachedCoordinatesMode !== texture.coordinatesMode) {\n          internalTexture._cachedCoordinatesMode = texture.coordinatesMode;\n          var textureWrapMode = texture.coordinatesMode !== 3 && texture.coordinatesMode !== 5 ? 1 : 0;\n          texture.wrapU = textureWrapMode;\n          texture.wrapV = textureWrapMode;\n        }\n        if (internalTexture._cachedWrapU !== texture.wrapU) {\n          internalTexture._cachedWrapU = texture.wrapU;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(texture.wrapU), internalTexture);\n        }\n        if (internalTexture._cachedWrapV !== texture.wrapV) {\n          internalTexture._cachedWrapV = texture.wrapV;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(texture.wrapV), internalTexture);\n        }\n        if (internalTexture.is3D && internalTexture._cachedWrapR !== texture.wrapR) {\n          internalTexture._cachedWrapR = texture.wrapR;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(texture.wrapR), internalTexture);\n        }\n        this._setAnisotropicLevel(target, internalTexture, texture.anisotropicFilteringLevel);\n      }\n      return true;\n    }\n    /**\n     * Sets an array of texture to the webGL context\n     * @param channel defines the channel where the texture array must be set\n     * @param uniform defines the associated uniform location\n     * @param textures defines the array of textures to bind\n     * @param name name of the channel\n     */\n  }, {\n    key: \"setTextureArray\",\n    value: function setTextureArray(channel, uniform, textures, name) {\n      if (channel === undefined || !uniform) {\n        return;\n      }\n      if (!this._textureUnits || this._textureUnits.length !== textures.length) {\n        this._textureUnits = new Int32Array(textures.length);\n      }\n      for (var i = 0; i < textures.length; i++) {\n        var texture = textures[i].getInternalTexture();\n        if (texture) {\n          this._textureUnits[i] = channel + i;\n          texture._associatedChannel = channel + i;\n        } else {\n          this._textureUnits[i] = -1;\n        }\n      }\n      this._gl.uniform1iv(uniform, this._textureUnits);\n      for (var index = 0; index < textures.length; index++) {\n        this._setTexture(this._textureUnits[index], textures[index], true);\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setAnisotropicLevel\",\n    value: function _setAnisotropicLevel(target, internalTexture, anisotropicFilteringLevel) {\n      var anisotropicFilterExtension = this._caps.textureAnisotropicFilterExtension;\n      if (internalTexture.samplingMode !== 11 && internalTexture.samplingMode !== 3 && internalTexture.samplingMode !== 2) {\n        anisotropicFilteringLevel = 1; // Forcing the anisotropic to 1 because else webgl will force filters to linear\n      }\n\n      if (anisotropicFilterExtension && internalTexture._cachedAnisotropicFilteringLevel !== anisotropicFilteringLevel) {\n        this._setTextureParameterFloat(target, anisotropicFilterExtension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(anisotropicFilteringLevel, this._caps.maxAnisotropy), internalTexture);\n        internalTexture._cachedAnisotropicFilteringLevel = anisotropicFilteringLevel;\n      }\n    }\n  }, {\n    key: \"_setTextureParameterFloat\",\n    value: function _setTextureParameterFloat(target, parameter, value, texture) {\n      this._bindTextureDirectly(target, texture, true, true);\n      this._gl.texParameterf(target, parameter, value);\n    }\n  }, {\n    key: \"_setTextureParameterInteger\",\n    value: function _setTextureParameterInteger(target, parameter, value, texture) {\n      if (texture) {\n        this._bindTextureDirectly(target, texture, true, true);\n      }\n      this._gl.texParameteri(target, parameter, value);\n    }\n    /**\n     * Unbind all vertex attributes from the webGL context\n     */\n  }, {\n    key: \"unbindAllAttributes\",\n    value: function unbindAllAttributes() {\n      if (this._mustWipeVertexAttributes) {\n        this._mustWipeVertexAttributes = false;\n        for (var i = 0; i < this._caps.maxVertexAttribs; i++) {\n          this.disableAttributeByIndex(i);\n        }\n        return;\n      }\n      for (var _i2 = 0, ul = this._vertexAttribArraysEnabled.length; _i2 < ul; _i2++) {\n        if (_i2 >= this._caps.maxVertexAttribs || !this._vertexAttribArraysEnabled[_i2]) {\n          continue;\n        }\n        this.disableAttributeByIndex(_i2);\n      }\n    }\n    /**\n     * Force the engine to release all cached effects. This means that next effect compilation will have to be done completely even if a similar effect was already compiled\n     */\n  }, {\n    key: \"releaseEffects\",\n    value: function releaseEffects() {\n      for (var name in this._compiledEffects) {\n        var webGLPipelineContext = this._compiledEffects[name].getPipelineContext();\n        this._deletePipelineContext(webGLPipelineContext);\n      }\n      this._compiledEffects = {};\n    }\n    /**\n     * Dispose and release all associated resources\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _a;\n      this.stopRenderLoop();\n      // Clear observables\n      if (this.onBeforeTextureInitObservable) {\n        this.onBeforeTextureInitObservable.clear();\n      }\n      // Empty texture\n      if (this._emptyTexture) {\n        this._releaseTexture(this._emptyTexture);\n        this._emptyTexture = null;\n      }\n      if (this._emptyCubeTexture) {\n        this._releaseTexture(this._emptyCubeTexture);\n        this._emptyCubeTexture = null;\n      }\n      if (this._dummyFramebuffer) {\n        this._gl.deleteFramebuffer(this._dummyFramebuffer);\n      }\n      // Release effects\n      this.releaseEffects();\n      (_a = this.releaseComputeEffects) === null || _a === void 0 ? void 0 : _a.call(this);\n      // Unbind\n      this.unbindAllAttributes();\n      this._boundUniforms = {};\n      // Events\n      if (IsWindowObjectExist()) {\n        if (this._renderingCanvas) {\n          if (!this._doNotHandleContextLost) {\n            this._renderingCanvas.removeEventListener(\"webglcontextlost\", this._onContextLost);\n            this._renderingCanvas.removeEventListener(\"webglcontextrestored\", this._onContextRestored);\n          }\n          window.removeEventListener(\"resize\", this._checkForMobile);\n        }\n      }\n      this._workingCanvas = null;\n      this._workingContext = null;\n      this._currentBufferPointers.length = 0;\n      this._renderingCanvas = null;\n      this._currentProgram = null;\n      this._boundRenderFunction = null;\n      Effect.ResetCache();\n      // Abort active requests\n      var _iterator8 = _createForOfIteratorHelper(this._activeRequests),\n        _step8;\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var request = _step8.value;\n          request.abort();\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n      this.onDisposeObservable.notifyObservers(this);\n      this.onDisposeObservable.clear();\n    }\n    /**\n     * Attach a new callback raised when context lost event is fired\n     * @param callback defines the callback to call\n     */\n  }, {\n    key: \"attachContextLostEvent\",\n    value: function attachContextLostEvent(callback) {\n      if (this._renderingCanvas) {\n        this._renderingCanvas.addEventListener(\"webglcontextlost\", callback, false);\n      }\n    }\n    /**\n     * Attach a new callback raised when context restored event is fired\n     * @param callback defines the callback to call\n     */\n  }, {\n    key: \"attachContextRestoredEvent\",\n    value: function attachContextRestoredEvent(callback) {\n      if (this._renderingCanvas) {\n        this._renderingCanvas.addEventListener(\"webglcontextrestored\", callback, false);\n      }\n    }\n    /**\n     * Get the current error code of the webGL context\n     * @returns the error code\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/getError\n     */\n  }, {\n    key: \"getError\",\n    value: function getError() {\n      return this._gl.getError();\n    }\n  }, {\n    key: \"_canRenderToFloatFramebuffer\",\n    value: function _canRenderToFloatFramebuffer() {\n      if (this._webGLVersion > 1) {\n        return this._caps.colorBufferFloat;\n      }\n      return this._canRenderToFramebuffer(1);\n    }\n  }, {\n    key: \"_canRenderToHalfFloatFramebuffer\",\n    value: function _canRenderToHalfFloatFramebuffer() {\n      if (this._webGLVersion > 1) {\n        return this._caps.colorBufferFloat;\n      }\n      return this._canRenderToFramebuffer(2);\n    }\n    // Thank you : http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n  }, {\n    key: \"_canRenderToFramebuffer\",\n    value: function _canRenderToFramebuffer(type) {\n      var gl = this._gl;\n      //clear existing errors\n      // eslint-disable-next-line no-empty\n      while (gl.getError() !== gl.NO_ERROR) {}\n      var successful = true;\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(type), 1, 1, 0, gl.RGBA, this._getWebGLTextureType(type), null);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      var fb = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n      var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n      successful = successful && status === gl.FRAMEBUFFER_COMPLETE;\n      successful = successful && gl.getError() === gl.NO_ERROR;\n      //try render by clearing frame buffer's color buffer\n      if (successful) {\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        successful = successful && gl.getError() === gl.NO_ERROR;\n      }\n      //try reading from frame to ensure render occurs (just creating the FBO is not sufficient to determine if rendering is supported)\n      if (successful) {\n        //in practice it's sufficient to just read from the backbuffer rather than handle potentially issues reading from the texture\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        var readFormat = gl.RGBA;\n        var readType = gl.UNSIGNED_BYTE;\n        var buffer = new Uint8Array(4);\n        gl.readPixels(0, 0, 1, 1, readFormat, readType, buffer);\n        successful = successful && gl.getError() === gl.NO_ERROR;\n      }\n      //clean up\n      gl.deleteTexture(texture);\n      gl.deleteFramebuffer(fb);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      //clear accumulated errors\n      // eslint-disable-next-line no-empty\n      while (!successful && gl.getError() !== gl.NO_ERROR) {}\n      return successful;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getWebGLTextureType\",\n    value: function _getWebGLTextureType(type) {\n      if (this._webGLVersion === 1) {\n        switch (type) {\n          case 1:\n            return this._gl.FLOAT;\n          case 2:\n            return this._gl.HALF_FLOAT_OES;\n          case 0:\n            return this._gl.UNSIGNED_BYTE;\n          case 8:\n            return this._gl.UNSIGNED_SHORT_4_4_4_4;\n          case 9:\n            return this._gl.UNSIGNED_SHORT_5_5_5_1;\n          case 10:\n            return this._gl.UNSIGNED_SHORT_5_6_5;\n        }\n        return this._gl.UNSIGNED_BYTE;\n      }\n      switch (type) {\n        case 3:\n          return this._gl.BYTE;\n        case 0:\n          return this._gl.UNSIGNED_BYTE;\n        case 4:\n          return this._gl.SHORT;\n        case 5:\n          return this._gl.UNSIGNED_SHORT;\n        case 6:\n          return this._gl.INT;\n        case 7:\n          // Refers to UNSIGNED_INT\n          return this._gl.UNSIGNED_INT;\n        case 1:\n          return this._gl.FLOAT;\n        case 2:\n          return this._gl.HALF_FLOAT;\n        case 8:\n          return this._gl.UNSIGNED_SHORT_4_4_4_4;\n        case 9:\n          return this._gl.UNSIGNED_SHORT_5_5_5_1;\n        case 10:\n          return this._gl.UNSIGNED_SHORT_5_6_5;\n        case 11:\n          return this._gl.UNSIGNED_INT_2_10_10_10_REV;\n        case 12:\n          return this._gl.UNSIGNED_INT_24_8;\n        case 13:\n          return this._gl.UNSIGNED_INT_10F_11F_11F_REV;\n        case 14:\n          return this._gl.UNSIGNED_INT_5_9_9_9_REV;\n        case 15:\n          return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV;\n      }\n      return this._gl.UNSIGNED_BYTE;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getInternalFormat\",\n    value: function _getInternalFormat(format) {\n      var useSRGBBuffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var internalFormat = useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA;\n      switch (format) {\n        case 0:\n          internalFormat = this._gl.ALPHA;\n          break;\n        case 1:\n          internalFormat = this._gl.LUMINANCE;\n          break;\n        case 2:\n          internalFormat = this._gl.LUMINANCE_ALPHA;\n          break;\n        case 6:\n          internalFormat = this._gl.RED;\n          break;\n        case 7:\n          internalFormat = this._gl.RG;\n          break;\n        case 4:\n          internalFormat = useSRGBBuffer ? this._gl.SRGB : this._gl.RGB;\n          break;\n        case 5:\n          internalFormat = useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA;\n          break;\n      }\n      if (this._webGLVersion > 1) {\n        switch (format) {\n          case 8:\n            internalFormat = this._gl.RED_INTEGER;\n            break;\n          case 9:\n            internalFormat = this._gl.RG_INTEGER;\n            break;\n          case 10:\n            internalFormat = this._gl.RGB_INTEGER;\n            break;\n          case 11:\n            internalFormat = this._gl.RGBA_INTEGER;\n            break;\n        }\n      }\n      return internalFormat;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getRGBABufferInternalSizedFormat\",\n    value: function _getRGBABufferInternalSizedFormat(type, format) {\n      var useSRGBBuffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (this._webGLVersion === 1) {\n        if (format !== undefined) {\n          switch (format) {\n            case 0:\n              return this._gl.ALPHA;\n            case 1:\n              return this._gl.LUMINANCE;\n            case 2:\n              return this._gl.LUMINANCE_ALPHA;\n            case 4:\n              return useSRGBBuffer ? this._gl.SRGB : this._gl.RGB;\n          }\n        }\n        return this._gl.RGBA;\n      }\n      switch (type) {\n        case 3:\n          switch (format) {\n            case 6:\n              return this._gl.R8_SNORM;\n            case 7:\n              return this._gl.RG8_SNORM;\n            case 4:\n              return this._gl.RGB8_SNORM;\n            case 8:\n              return this._gl.R8I;\n            case 9:\n              return this._gl.RG8I;\n            case 10:\n              return this._gl.RGB8I;\n            case 11:\n              return this._gl.RGBA8I;\n            default:\n              return this._gl.RGBA8_SNORM;\n          }\n        case 0:\n          switch (format) {\n            case 6:\n              return this._gl.R8;\n            case 7:\n              return this._gl.RG8;\n            case 4:\n              return useSRGBBuffer ? this._gl.SRGB8 : this._gl.RGB8;\n            // By default. Other possibilities are RGB565, SRGB8.\n            case 5:\n              return useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA8;\n            // By default. Other possibilities are RGB5_A1, RGBA4, SRGB8_ALPHA8.\n            case 8:\n              return this._gl.R8UI;\n            case 9:\n              return this._gl.RG8UI;\n            case 10:\n              return this._gl.RGB8UI;\n            case 11:\n              return this._gl.RGBA8UI;\n            case 0:\n              return this._gl.ALPHA;\n            case 1:\n              return this._gl.LUMINANCE;\n            case 2:\n              return this._gl.LUMINANCE_ALPHA;\n            default:\n              return this._gl.RGBA8;\n          }\n        case 4:\n          switch (format) {\n            case 8:\n              return this._gl.R16I;\n            case 9:\n              return this._gl.RG16I;\n            case 10:\n              return this._gl.RGB16I;\n            case 11:\n              return this._gl.RGBA16I;\n            default:\n              return this._gl.RGBA16I;\n          }\n        case 5:\n          switch (format) {\n            case 8:\n              return this._gl.R16UI;\n            case 9:\n              return this._gl.RG16UI;\n            case 10:\n              return this._gl.RGB16UI;\n            case 11:\n              return this._gl.RGBA16UI;\n            default:\n              return this._gl.RGBA16UI;\n          }\n        case 6:\n          switch (format) {\n            case 8:\n              return this._gl.R32I;\n            case 9:\n              return this._gl.RG32I;\n            case 10:\n              return this._gl.RGB32I;\n            case 11:\n              return this._gl.RGBA32I;\n            default:\n              return this._gl.RGBA32I;\n          }\n        case 7:\n          // Refers to UNSIGNED_INT\n          switch (format) {\n            case 8:\n              return this._gl.R32UI;\n            case 9:\n              return this._gl.RG32UI;\n            case 10:\n              return this._gl.RGB32UI;\n            case 11:\n              return this._gl.RGBA32UI;\n            default:\n              return this._gl.RGBA32UI;\n          }\n        case 1:\n          switch (format) {\n            case 6:\n              return this._gl.R32F;\n            // By default. Other possibility is R16F.\n            case 7:\n              return this._gl.RG32F;\n            // By default. Other possibility is RG16F.\n            case 4:\n              return this._gl.RGB32F;\n            // By default. Other possibilities are RGB16F, R11F_G11F_B10F, RGB9_E5.\n            case 5:\n              return this._gl.RGBA32F;\n            // By default. Other possibility is RGBA16F.\n            default:\n              return this._gl.RGBA32F;\n          }\n        case 2:\n          switch (format) {\n            case 6:\n              return this._gl.R16F;\n            case 7:\n              return this._gl.RG16F;\n            case 4:\n              return this._gl.RGB16F;\n            // By default. Other possibilities are R11F_G11F_B10F, RGB9_E5.\n            case 5:\n              return this._gl.RGBA16F;\n            default:\n              return this._gl.RGBA16F;\n          }\n        case 10:\n          return this._gl.RGB565;\n        case 13:\n          return this._gl.R11F_G11F_B10F;\n        case 14:\n          return this._gl.RGB9_E5;\n        case 8:\n          return this._gl.RGBA4;\n        case 9:\n          return this._gl.RGB5_A1;\n        case 11:\n          switch (format) {\n            case 5:\n              return this._gl.RGB10_A2;\n            // By default. Other possibility is RGB5_A1.\n            case 11:\n              return this._gl.RGB10_A2UI;\n            default:\n              return this._gl.RGB10_A2;\n          }\n      }\n      return useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA8;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getRGBAMultiSampleBufferFormat\",\n    value: function _getRGBAMultiSampleBufferFormat(type) {\n      if (type === 1) {\n        return this._gl.RGBA32F;\n      } else if (type === 2) {\n        return this._gl.RGBA16F;\n      }\n      return this._gl.RGBA8;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_loadFile\",\n    value: function _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n      var _this6 = this;\n      var request = ThinEngine._FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n      this._activeRequests.push(request);\n      request.onCompleteObservable.add(function (request) {\n        _this6._activeRequests.splice(_this6._activeRequests.indexOf(request), 1);\n      });\n      return request;\n    }\n    /**\n     * Loads a file from a url\n     * @param url url to load\n     * @param onSuccess callback called when the file successfully loads\n     * @param onProgress callback called while file is loading (if the server supports this mode)\n     * @param offlineProvider defines the offline provider for caching\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @param onError callback called when the file fails to load\n     * @returns a file request object\n     * @internal\n     */\n  }, {\n    key: \"readPixels\",\n    value:\n    /**\n     * Reads pixels from the current frame buffer. Please note that this function can be slow\n     * @param x defines the x coordinate of the rectangle where pixels must be read\n     * @param y defines the y coordinate of the rectangle where pixels must be read\n     * @param width defines the width of the rectangle where pixels must be read\n     * @param height defines the height of the rectangle where pixels must be read\n     * @param hasAlpha defines whether the output should have alpha or not (defaults to true)\n     * @param flushRenderer true to flush the renderer from the pending commands before reading the pixels\n     * @returns a ArrayBufferView promise (Uint8Array) containing RGBA colors\n     */\n    function readPixels(x, y, width, height) {\n      var hasAlpha = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var flushRenderer = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n      var numChannels = hasAlpha ? 4 : 3;\n      var format = hasAlpha ? this._gl.RGBA : this._gl.RGB;\n      var data = new Uint8Array(height * width * numChannels);\n      if (flushRenderer) {\n        this.flushFramebuffer();\n      }\n      this._gl.readPixels(x, y, width, height, format, this._gl.UNSIGNED_BYTE, data);\n      return Promise.resolve(data);\n    }\n    /**\n     * Gets a Promise<boolean> indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n  }, {\n    key: \"getHostDocument\",\n    value:\n    /**\n     * Gets host document\n     * @returns the host document object\n     */\n    function getHostDocument() {\n      if (this._renderingCanvas && this._renderingCanvas.ownerDocument) {\n        return this._renderingCanvas.ownerDocument;\n      }\n      return IsDocumentAvailable() ? document : null;\n    }\n  }], [{\n    key: \"NpmPackage\",\n    get: function get() {\n      return \"babylonjs@5.42.0\";\n    }\n    /**\n     * Returns the current version of the framework\n     */\n  }, {\n    key: \"Version\",\n    get: function get() {\n      return \"5.42.0\";\n    }\n  }, {\n    key: \"ShadersRepository\",\n    get: function get() {\n      return Effect.ShadersRepository;\n    },\n    set: function set(value) {\n      Effect.ShadersRepository = value;\n    }\n  }, {\n    key: \"_CreateCanvas\",\n    value: function _CreateCanvas(width, height) {\n      if (typeof document === \"undefined\") {\n        return new OffscreenCanvas(width, height);\n      }\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n  }, {\n    key: \"_ConcatenateShader\",\n    value: function _ConcatenateShader(source, defines) {\n      var shaderVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      return shaderVersion + (defines ? defines + \"\\n\" : \"\") + source;\n    }\n  }, {\n    key: \"_FileToolsLoadImage\",\n    value: function _FileToolsLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions) {\n      throw _WarnImport(\"FileTools\");\n    }\n  }, {\n    key: \"_FileToolsLoadFile\",\n    value: function _FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n      throw _WarnImport(\"FileTools\");\n    }\n  }, {\n    key: \"IsSupportedAsync\",\n    get: function get() {\n      return Promise.resolve(this.isSupported());\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n  }, {\n    key: \"IsSupported\",\n    get: function get() {\n      return this.isSupported(); // Backward compat\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     * @returns true if the engine can be created\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      if (this._HasMajorPerformanceCaveat !== null) {\n        return !this._HasMajorPerformanceCaveat; // We know it is performant so WebGL is supported\n      }\n\n      if (this._IsSupported === null) {\n        try {\n          var tempcanvas = this._CreateCanvas(1, 1);\n          var gl = tempcanvas.getContext(\"webgl\") || tempcanvas.getContext(\"experimental-webgl\");\n          this._IsSupported = gl != null && !!window.WebGLRenderingContext;\n        } catch (e) {\n          this._IsSupported = false;\n        }\n      }\n      return this._IsSupported;\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated on a performant device (ie. if a webGL context can be found and it does not use a slow implementation)\n     */\n  }, {\n    key: \"HasMajorPerformanceCaveat\",\n    get: function get() {\n      if (this._HasMajorPerformanceCaveat === null) {\n        try {\n          var tempcanvas = this._CreateCanvas(1, 1);\n          var gl = tempcanvas.getContext(\"webgl\", {\n            failIfMajorPerformanceCaveat: true\n          }) || tempcanvas.getContext(\"experimental-webgl\", {\n            failIfMajorPerformanceCaveat: true\n          });\n          this._HasMajorPerformanceCaveat = !gl;\n        } catch (e) {\n          this._HasMajorPerformanceCaveat = false;\n        }\n      }\n      return this._HasMajorPerformanceCaveat;\n    }\n    /**\n     * Find the next highest power of two.\n     * @param x Number to start search from.\n     * @returns Next highest power of two.\n     */\n  }, {\n    key: \"CeilingPOT\",\n    value: function CeilingPOT(x) {\n      x--;\n      x |= x >> 1;\n      x |= x >> 2;\n      x |= x >> 4;\n      x |= x >> 8;\n      x |= x >> 16;\n      x++;\n      return x;\n    }\n    /**\n     * Find the next lowest power of two.\n     * @param x Number to start search from.\n     * @returns Next lowest power of two.\n     */\n  }, {\n    key: \"FloorPOT\",\n    value: function FloorPOT(x) {\n      x = x | x >> 1;\n      x = x | x >> 2;\n      x = x | x >> 4;\n      x = x | x >> 8;\n      x = x | x >> 16;\n      return x - (x >> 1);\n    }\n    /**\n     * Find the nearest power of two.\n     * @param x Number to start search from.\n     * @returns Next nearest power of two.\n     */\n  }, {\n    key: \"NearestPOT\",\n    value: function NearestPOT(x) {\n      var c = ThinEngine.CeilingPOT(x);\n      var f = ThinEngine.FloorPOT(x);\n      return c - x > x - f ? f : c;\n    }\n    /**\n     * Get the closest exponent of two\n     * @param value defines the value to approximate\n     * @param max defines the maximum value to return\n     * @param mode defines how to define the closest value\n     * @returns closest exponent of two of the given value\n     */\n  }, {\n    key: \"GetExponentOfTwo\",\n    value: function GetExponentOfTwo(value, max) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n      var pot;\n      switch (mode) {\n        case 1:\n          pot = ThinEngine.FloorPOT(value);\n          break;\n        case 2:\n          pot = ThinEngine.NearestPOT(value);\n          break;\n        case 3:\n        default:\n          pot = ThinEngine.CeilingPOT(value);\n          break;\n      }\n      return Math.min(pot, max);\n    }\n    /**\n     * Queue a new function into the requested animation frame pool (ie. this function will be executed by the browser (or the javascript engine) for the next frame)\n     * @param func - the function to be called\n     * @param requester - the object that will request the next frame. Falls back to window.\n     * @returns frame number\n     */\n  }, {\n    key: \"QueueNewFrame\",\n    value: function QueueNewFrame(func, requester) {\n      // Note that there is kind of a typing issue here, as `setTimeout` might return something else than a number (NodeJs returns a NodeJS.Timeout object).\n      // Also if the global `requestAnimationFrame`'s returnType is number, `requester.requestPostAnimationFrame` and `requester.requestAnimationFrame` types\n      // are `any`.\n      if (!IsWindowObjectExist()) {\n        if (typeof requestAnimationFrame === \"function\") {\n          return requestAnimationFrame(func);\n        }\n      } else {\n        var _ref2 = requester || window,\n          requestPostAnimationFrame = _ref2.requestPostAnimationFrame,\n          _requestAnimationFrame = _ref2.requestAnimationFrame;\n        if (typeof requestPostAnimationFrame === \"function\") {\n          return requestPostAnimationFrame(func);\n        }\n        if (typeof _requestAnimationFrame === \"function\") {\n          return _requestAnimationFrame(func);\n        }\n      }\n      // fallback to the global `setTimeout`.\n      // In most cases (aka in the browser), `window` is the global object, so instead of calling `window.setTimeout` we could call the global `setTimeout`.\n      return setTimeout(func, 16);\n    }\n  }]);\n  return ThinEngine;\n}();\n/** Use this array to turn off some WebGL2 features on known buggy browsers version */\nThinEngine.ExceptionList = [{\n  key: \"Chrome/63.0\",\n  capture: \"63\\\\.0\\\\.3239\\\\.(\\\\d+)\",\n  captureConstraint: 108,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/58\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/59\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Chrome/72.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/73.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/74.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/71\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/72\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n},\n// desktop osx safari 15.4\n{\n  key: \".*AppleWebKit.*(15.4).*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n},\n// mobile browsers using safari 15.4 on ios\n{\n  key: \".*(15.4).*AppleWebKit.*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n}];\n/** @internal */\nThinEngine._TextureLoaders = [];\n// Updatable statics so stick with vars here\n/**\n * Gets or sets the epsilon value used by collision engine\n */\nThinEngine.CollisionsEpsilon = 0.001;\n// Statics\nThinEngine._IsSupported = null;\nThinEngine._HasMajorPerformanceCaveat = null;"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e2","f","TypeError","err","normalCompletion","didErr","step","next","_e3","return","arr","len","arr2","BufferPointer","this","ThinEngine","canvasOrContext","antialias","options","adaptToDeviceRatio","_this","_name","forcePOTTextures","isFullscreen","cullBackFaces","renderEvenInBackground","preventCacheWipeBetweenFrames","validateShaderPrograms","_useReverseDepthBuffer","isNDCHalfZRange","hasOriginBottomLeft","disableUniformBuffers","onDisposeObservable","_frameId","_uniformBuffers","_storageBuffers","_webGLVersion","_windowIsBackground","_highPrecisionShadersAllowed","_badOS","_badDesktopOS","_renderingQueueLaunched","_activeRenderLoops","onContextLostObservable","onContextRestoredObservable","_contextWasLost","_doNotHandleContextLost","disableVertexArrayObjects","_colorWrite","_colorWriteChanged","_depthCullingState","_stencilStateComposer","_stencilState","_alphaState","_alphaMode","_alphaEquation","_internalTexturesCache","_renderTargetWrapperCache","_activeChannel","_currentTextureChannel","_boundTexturesCache","_compiledEffects","_vertexAttribArraysEnabled","_uintIndicesCurrentlySet","_currentBoundBuffer","_currentFramebuffer","_dummyFramebuffer","_currentBufferPointers","_currentInstanceLocations","_currentInstanceBuffers","_vaoRecordInProgress","_mustWipeVertexAttributes","_nextFreeTextureSlots","_maxSimultaneousTextures","_maxMSAASamplesOverride","_activeRequests","_lastDevicePixelRatio","_transformTextureUrl","hostInformation","isMobile","premultipliedAlpha","onBeforeTextureInitObservable","_isWebGPU","_snapshotRenderingMode","_useExactSrgbConversions","_viewportCached","x","y","z","w","_unpackFlipYCached","enableUnpackFlipYCached","_boundUniforms","startTime","canvas","_creationOptions","stencilGlobal","useHighPrecisionMatrix","getContext","_renderingCanvas","undefined","deterministicLockstep","lockstepMaxSteps","timeStep","preserveDrawingBuffer","audioEngine","audioEngineOptions","audioContext","_audioContext","audioDestination","_audioDestination","stencil","xrCompatible","useExactSrgbConversions","doNotHandleContextLost","navigator","userAgent","_checkForMobile","currentUA","indexOf","document","window","addEventListener","_step","ua","_iterator","ExceptionList","exception","key","targets","RegExp","capture","captureConstraint","constraint","matches","exec","parseInt","_step2","_iterator2","_onContextLost","evt","preventDefault","notifyObservers","_onContextRestored","_restoreEngineAfterContextLost","_initGLContext","bind","powerPreference","disableWebGL2Support","_gl","_shaderPlatformName","deleteQuery","Error","renderbufferStorageMultisample","attributes","getContextAttributes","pixelStorei","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","useHighPrecisionFloats","devicePixelRatio","limitDeviceRatio","_hardwareScalingLevel","Math","min","resize","_isStencilEnable","_initFeatures","_caps","maxVertexAttribs","_shaderProcessor","webGLVersion","versionToLog","concat","Version","console","log","description","setAttribute","get","parallelShaderCompile","set","shaderLanguage","useReverse","depthFunc","highPrecisionShaderSupported","dimensions","_framebufferDimensionsObject","_cachedViewport","_emptyTexture","createRawTexture","Uint8Array","_emptyTexture3D","createRawTexture3D","_emptyTexture2DArray","createRawTexture2DArray","_emptyCubeTexture","faceData","cubeData","createRawCubeTexture","activate","mode","snapshotRendering","width","height","_CreateCanvas","createElement","initEngine","_this2","setTimeout","_callee","_a","depthTest","depthMask","stencilTest","_context","prev","wipeCaches","_rebuildEffects","_rebuildComputeEffects","_rebuildBuffers","_rebuildInternalTextures","_rebuildRenderTargetWrappers","stop","doNotHandleTouchAction","_step3","_iterator3","_rebuild","_step4","_iterator4","effect","_pipelineContext","_wasPreviouslyReady","_prepareEffect","isReady","_step5","_iterator5","_step6","_iterator6","maxTexturesImageUnits","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTexturesImageUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","maxVertexTextureImageUnits","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxSamples","MAX_SAMPLES","maxCubemapTextureSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxRenderTextureSize","MAX_RENDERBUFFER_SIZE","MAX_VERTEX_ATTRIBS","maxVaryingVectors","MAX_VARYING_VECTORS","maxFragmentUniformVectors","MAX_FRAGMENT_UNIFORM_VECTORS","maxVertexUniformVectors","MAX_VERTEX_UNIFORM_VECTORS","getExtension","standardDerivatives","maxAnisotropy","astc","bptc","s3tc","s3tc_srgb","pvrtc","etc1","etc2","textureAnisotropicFilterExtension","uintIndices","fragmentDepthSupported","timerQuery","supportOcclusionQuery","canUseTimestampForTimerQuery","drawBuffersExtension","maxMSAASamples","colorBufferFloat","textureFloat","textureHalfFloat","textureHalfFloatRender","textureFloatLinearFiltering","textureFloatRender","textureHalfFloatLinearFiltering","vertexArrayObject","instancedArrays","textureLOD","blendMinMax","multiview","oculusMultiview","depthTextureExtension","canUseGLInstanceID","canUseGLVertexID","supportComputeShaders","supportSRGBBuffers","supportTransformFeedbacks","textureMaxLevel","texture2DArrayMaxLayerCount","_glVersion","VERSION","rendererInfo","_glRenderer","UNMASKED_RENDERER_WEBGL","_glVendor","UNMASKED_VENDOR_WEBGL","VENDOR","RENDERER","HALF_FLOAT_OES","RGBA16F","RGBA32F","DEPTH24_STENCIL8","getQuery","getQueryEXT","TIMESTAMP_EXT","QUERY_COUNTER_BITS_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","_canRenderToFloatFramebuffer","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_SRGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","_canRenderToHalfFloatFramebuffer","drawBuffers","drawBuffersWEBGL","DRAW_FRAMEBUFFER","FRAMEBUFFER","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","vertexArrayObjectExtension","createVertexArray","createVertexArrayOES","bindVertexArray","bindVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","instanceExtension","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","vertexAttribDivisorANGLE","getShaderPrecisionFormat","vertexhighp","VERTEX_SHADER","HIGH_FLOAT","fragmenthighp","FRAGMENT_SHADER","precision","blendMinMaxExtension","MAX","MAX_EXT","MIN","MIN_EXT","sRGBExtension","SRGB","SRGB_EXT","SRGB8","SRGB_ALPHA_EXT","SRGB8_ALPHA8","forceSRGBBufferSupportState","LEQUAL","slot","push","_features","forceBitmapOverHTMLImageElement","supportRenderAndCopyToLodForFloatTextures","supportDepthStencilTexture","supportShadowSamplers","uniformBufferHardCheckMatrix","allowTexturePrefiltering","trackUbosInFrame","checkUbosContentBeforeUpload","supportCSM","basisNeedsPOT","support3DTextures","needTypeSuffixInShaderConstants","supportMSAA","supportSSAO2","supportExtendedTextureFormats","supportSwitchCaseInShader","supportSyncTextureRead","needsInvertingBitmap","useUBOBindingCache","needShaderCodeInlining","needToAlwaysBindUniformBuffers","supportRenderPasses","supportSpriteInstancing","_collectUbosUpdatedInFrame","_workingCanvas","createCanvas","context","_workingContext","hasOwnProperty","getGlInfo","vendor","renderer","version","level","renderFunction","index","splice","shouldRender","beginFrame","endFrame","_frameHandler","_queueNewFrame","_boundRenderFunction","getHostWindow","ownerDocument","defaultView","useScreen","arguments","_currentRenderTarget","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","bindedRenderFunction","requester","QueueNewFrame","_renderLoop","color","backBuffer","depth","useStencilGlobalOnly","stencilStateComposer","applyStates","clearColor","r","g","b","a","COLOR_BUFFER_BIT","useReverseDepthBuffer","GEQUAL","clearDepth","DEPTH_BUFFER_BIT","clearStencil","STENCIL_BUFFER_BIT","clear","viewport","requiredWidth","requiredHeight","getRenderWidth","getRenderHeight","_viewport","flushFramebuffer","forceSetSize","changeRatio","clientWidth","innerWidth","clientHeight","innerHeight","setSize","texture","_b","_c","_d","_e","faceIndex","forceFullscreenViewport","lodLevel","layer","webglRTWrapper","unBindFramebuffer","_bindUnboundFramebuffer","_MSAAFramebuffer","_framebuffer","gl","is2DArray","framebufferTextureLayer","COLOR_ATTACHMENT0","_hardwareTexture","underlyingResource","isCube","framebufferTexture2D","TEXTURE_CUBE_MAP_POSITIVE_X","depthStencilTexture","_depthStencilTexture","attachment","_depthStencilTextureWithStencil","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","TEXTURE_2D","setViewport","pow","culling","zOffset","force","reverseSide","zOffsetUnits","cull","cullFace","BACK","FRONT","setZOffset","setZOffsetUnits","frontFace","CW","CCW","stencilMaterial","enable","framebuffer","bindFramebuffer","_bindTextureDirectly","generateMipmap","disableGenerateMipMaps","onBeforeUnbind","isMulti","unBindMultiColorAttachmentFramebuffer","READ_FRAMEBUFFER","blitFramebuffer","NEAREST","generateMipMaps","generateMipmaps","flush","bindArrayBuffer","_cachedVertexBuffers","data","_createVertexBuffer","STATIC_DRAW","usage","vbo","createBuffer","dataBuffer","bufferData","ARRAY_BUFFER","Float32Array","_resetVertexBufferBinding","references","DYNAMIC_DRAW","bindIndexBuffer","_cachedIndexBuffer","indices","updatable","_normalizeIndexData","ELEMENT_ARRAY_BUFFER","_resetIndexBufferBinding","is32Bits","BYTES_PER_ELEMENT","Uint32Array","Uint16Array","buffer","_unbindVertexArrayObject","_bindBuffer","pipelineContext","blockName","program","uniformLocation","getUniformBlockIndex","uniformBlockBinding","target","bindBuffer","bufferSubData","indx","size","type","normalized","stride","offset","pointer","changed","active","UNSIGNED_INT","INT","vertexAttribIPointer","vertexAttribPointer","indexBuffer","vertexBuffers","overrideVertexBuffers","getAttributesNames","unbindAllAttributes","order","getAttributeLocation","ai","vertexBuffer","enableVertexAttribArray","getBuffer","_vertexAttribPointer","getSize","byteStride","byteOffset","getIsInstanced","getInstanceDivisor","vao","_bindVertexBuffersAttributes","_cachedVertexArrayObject","vertexDeclaration","vertexStrideSize","_cachedEffectForVertexBuffers","attributesCount","getAttributesCount","FLOAT","_bindIndexBufferWithCache","boundBuffer","ul","instancesBuffer","offsetLocation","_deleteBuffer","deleteBuffer","offsetLocations","bindInstancesBuffer","attributesInfo","computeStride","attributeSize","_i","_ai","_currentEffect","getAttributeLocationByName","attributeName","attributeType","divisor","attributeLocation","disableInstanceAttribute","shouldClean","disableAttributeByIndex","disableVertexAttribArray","useTriangles","indexStart","indexCount","instancesCount","drawElementsType","verticesStart","verticesCount","drawArraysType","fillMode","_reportDrawCall","drawMode","_drawMode","indexFormat","UNSIGNED_SHORT","mult","drawElements","drawArrays","TRIANGLES","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLE_STRIP","TRIANGLE_FAN","_key","getPipelineContext","_deletePipelineContext","webGLPipelineContext","__SPECTOR_rebuildProgram","deleteProgram","defines","baseName","attributesNamesOrOptions","uniformsNamesOrEngine","samplers","fallbacks","onCompiled","onError","indexParameters","vertex","vertexElement","vertexToken","vertexSource","fragment","fragmentElement","fragmentToken","fragmentSource","globalDefines","_getGlobalDefines","fullDefines","compiledEffect","source","shaderVersion","_compileRawShader","_ConcatenateShader","shader","createShader","error","NO_ERROR","tempError","getError","isContextLost","shaderSource","compileShader","getShaderSource","vertexCode","fragmentCode","transformFeedbackVaryings","vertexShader","fragmentShader","_createShaderProgram","_compileShader","code","shaderProcessingContext","engine","isParallelCompiled","shaderProgram","createProgram","attachShader","linkProgram","_finalizePipelineContext","getProgramParameter","LINK_STATUS","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexCompilationError","_log","fragmentCompilationError","getProgramInfoLog","programLinkError","validateProgram","VALIDATE_STATUS","_error","programValidationError","deleteShader","vertexSourceCode","fragmentSourceCode","createAsRaw","rawVertexSourceCode","rawFragmentSourceCode","rebuildRebind","webGLRenderingState","createRawShaderProgram","createShaderProgram","COMPLETION_STATUS_KHR","action","oldHandler","uniformsNames","results","getUniformLocation","attributesNames","getAttribLocation","bindSamplers","onBind","_onBindObservable","uniform","uniform1i","uniform2i","uniform3i","uniform4i","array","uniform1iv","uniform2iv","uniform3iv","uniform4iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","matrices","uniformMatrix4fv","matrix","uniformMatrix3fv","uniformMatrix2fv","uniform1f","uniform2f","uniform3f","uniform4f","apply","colorMask","bruteForce","_currentProgram","resetTextureCache","reset","UNPACK_PREMULTIPLY_ALPHA_WEBGL","samplingMode","magFilter","minFilter","LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","mag","createTexture","_createTexture","format","useSRGBBuffer","samples","isWebGPU","layers","filters","_getSamplingParameters","TEXTURE_2D_ARRAY","sizedFormat","_getRGBABufferInternalSizedFormat","internalFormat","_getInternalFormat","textureType","_getWebGLTextureType","texImage3D","texImage2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_useSRGBBuffer","baseWidth","baseHeight","noMipmap","url","invertY","scene","_this3","onLoad","prepareTexture","prepareTextureProcessFunction","fallback","forcedExtension","mimeType","loaderOptions","fromData","substr","fromBlob","isBase64","originalUrl","_originalUrl","lastDot","lastIndexOf","extension","substring","toLowerCase","loader","queryStringIndex","split","_step7","_iterator7","_TextureLoaders","availableLoader","canLoad","addPendingData","_getUseSRGBBuffer","_buffer","onLoadObserver","onLoadedObservable","add","onInternalError","message","removePendingData","remove","_createTextureBase","onErrorObservable","callback","loadData","loadMipmap","isCompressed","loadFailed","ArrayBuffer","isView","_loadFile","offlineProvider","request","responseURL","onload","img","decoding","close","_FileToolsLoadImage","imageOrientation","Blob","_this4","_prepareWebGLTexture","potWidth","potHeight","continuationCallback","isPot","RGBA","RGB","texelFormat","UNSIGNED_BYTE","_supportsHardwareTextureRescaling","_prepareWorkingCanvas","drawImage","_rescaleTexture","_releaseTexture","destination","onComplete","UNPACK_FLIP_Y_WEBGL","UNPACK_ALIGNMENT","TEXTURE_CUBE_MAP","is3D","TEXTURE_3D","isMultiview","_getTextureTarget","_setTextureParameterInteger","wrapU","wrapV","wrapR","_getTextureWrapMode","_cachedWrapU","_cachedWrapV","TEXTURE_WRAP_R","_cachedWrapR","internalTexture","generateStencil","bilinearFiltering","comparisonFunction","_comparisonFunction","samplingParameters","TEXTURE_COMPARE_FUNC","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","lod","compressedTexImage2D","imageData","babylonInternalFormat","useTextureWidthAndHeight","_unpackFlipY","lodMaxWidth","round","LOG2E","lodMaxHeight","max","xOffset","yOffset","targetForBinding","texSubImage2D","bindTarget","_uploadDataToTextureDirectly","processFunction","_this5","getCaps","needPOTTextures","GetExponentOfTwo","_prepareWebGLTextureContinuation","generateStencilBuffer","generateDepthBuffer","_createRenderBuffer","DEPTH_STENCIL","depthFormat","DEPTH_COMPONENT16","DEPTH_COMPONENT32F","STENCIL_INDEX8","STENCIL_ATTACHMENT","msInternalFormat","unbindBuffer","renderBuffer","createRenderbuffer","_updateRenderBuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","_deleteTexture","unbindAllTextures","_lodTextureHigh","dispose","_lodTextureMid","_lodTextureLow","_irradianceTexture","rtWrapper","deleteTexture","useProgram","_setProgram","getSamplers","getUniform","activeTexture","TEXTURE0","forTextureDataUpdate","wasPreviouslyBound","isTextureForRendering","_associatedChannel","currentTextureBound","_activateCurrentTexture","bindTexture","_bindSamplerUniformToChannel","channel","_setTexture","sourceSlot","_currentState","REPEAT","MIRRORED_REPEAT","isPartOfTextureArray","video","update","delayLoadState","delayLoad","getInternalTexture","emptyCubeTexture","emptyTexture3D","emptyTexture2DArray","emptyTexture","needToBind","_cachedCoordinatesMode","coordinatesMode","textureWrapMode","_setAnisotropicLevel","anisotropicFilteringLevel","textures","_textureUnits","Int32Array","anisotropicFilterExtension","_cachedAnisotropicFilteringLevel","_setTextureParameterFloat","TEXTURE_MAX_ANISOTROPY_EXT","parameter","texParameterf","_i2","stopRenderLoop","deleteFramebuffer","releaseEffects","releaseComputeEffects","removeEventListener","_step8","_iterator8","abort","_canRenderToFramebuffer","successful","fb","createFramebuffer","status","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readFormat","readType","readPixels","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","HALF_FLOAT","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_5_9_9_9_REV","FLOAT_32_UNSIGNED_INT_24_8_REV","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED","RG","RED_INTEGER","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","R8_SNORM","RG8_SNORM","RGB8_SNORM","R8I","RG8I","RGB8I","RGBA8I","RGBA8_SNORM","R8","RG8","RGB8","RGBA8","R8UI","RG8UI","RGB8UI","RGBA8UI","R16I","RG16I","RGB16I","RGBA16I","R16UI","RG16UI","RGB16UI","RGBA16UI","R32I","RG32I","RGB32I","RGBA32I","R32UI","RG32UI","RGB32UI","RGBA32UI","R32F","RG32F","RGB32F","R16F","RG16F","RGB16F","RGB565","R11F_G11F_B10F","RGB9_E5","RGBA4","RGB5_A1","RGB10_A2","RGB10_A2UI","onSuccess","onProgress","useArrayBuffer","_this6","_FileToolsLoadFile","onCompleteObservable","hasAlpha","flushRenderer","numChannels","Promise","resolve","OffscreenCanvas","input","imageBitmapOptions","isSupported","_HasMajorPerformanceCaveat","_IsSupported","tempcanvas","WebGLRenderingContext","failIfMajorPerformanceCaveat","c","CeilingPOT","FloorPOT","pot","NearestPOT","func","_ref2","requestPostAnimationFrame","_requestAnimationFrame","requestAnimationFrame","CollisionsEpsilon"],"sourceRoot":""}